<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>java核心技术</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="java核心技术"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2014-09-07T20:28+0800"/>
<meta name="author" content="王超"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">java核心技术</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 java基本的程序设计结构</a>
<ul>
<li><a href="#sec-1-1">1.1 注释</a></li>
<li><a href="#sec-1-2">1.2 java基本数据类型</a></li>
<li><a href="#sec-1-3">1.3 变量</a></li>
<li><a href="#sec-1-4">1.4 运算符</a></li>
<li><a href="#sec-1-5">1.5 字符串</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1 String重要方法方法</a></li>
<li><a href="#sec-1-5-2">1.5.2 构建字符串</a></li>
<li><a href="#sec-1-5-3">1.5.3 StringBuilder重要方法</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6 输入输出</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1 标准输出</a></li>
<li><a href="#sec-1-6-2">1.6.2 格式化输出</a></li>
<li><a href="#sec-1-6-3">1.6.3 标准输入</a></li>
<li><a href="#sec-1-6-4">1.6.4 读文件</a></li>
<li><a href="#sec-1-6-5">1.6.5 写文件</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7 控制流程</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1 条件语句</a></li>
<li><a href="#sec-1-7-2">1.7.2 循环语句</a></li>
<li><a href="#sec-1-7-3">1.7.3 switch语句</a></li>
<li><a href="#sec-1-7-4">1.7.4 break和continue</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8 数组</a>
<ul>
<li><a href="#sec-1-8-1">1.8.1 初始化数组</a></li>
<li><a href="#sec-1-8-2">1.8.2 Arrays重要方法</a></li>
<li><a href="#sec-1-8-3">1.8.3 多维数组</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-2">2 对象与类</a>
<ul>
<li><a href="#sec-2-1">2.1 使用现有类</a>
<ul>
<li><a href="#sec-2-1-1">2.1.1 java.util.GregorianCalendar</a></li>
</ul>
</li>
<li><a href="#sec-2-2">2.2 用户自定义类</a></li>
<li><a href="#sec-2-3">2.3 静态域与静态方法</a></li>
<li><a href="#sec-2-4">2.4 方法参数</a></li>
<li><a href="#sec-2-5">2.5 对象构造</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1 对象初始化步骤</a></li>
<li><a href="#sec-2-5-2">2.5.2 域初始化</a></li>
<li><a href="#sec-2-5-3">2.5.3 初始化块</a></li>
<li><a href="#sec-2-5-4">2.5.4 构造器</a></li>
<li><a href="#sec-2-5-5">2.5.5 调用另一个构造器</a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6 包</a></li>
<li><a href="#sec-2-7">2.7 类路径</a></li>
<li><a href="#sec-2-8">2.8 小结</a></li>
</ul>
</li>
<li><a href="#sec-3">3 继承</a>
<ul>
<li><a href="#sec-3-1">3.1 类,超类和子类</a>
<ul>
<li><a href="#sec-3-1-1">3.1.1 多态</a></li>
<li><a href="#sec-3-1-2">3.1.2 动态绑定</a></li>
<li><a href="#sec-3-1-3">3.1.3 阻止继承</a></li>
<li><a href="#sec-3-1-4">3.1.4 强制类型转换</a></li>
<li><a href="#sec-3-1-5">3.1.5 抽象类</a></li>
<li><a href="#sec-3-1-6">3.1.6 受保护的访问</a></li>
</ul>
</li>
<li><a href="#sec-3-2">3.2 object 所有类的超类</a></li>
<li><a href="#sec-3-3">3.3 泛型数组列表</a></li>
<li><a href="#sec-3-4">3.4 对象包装器</a></li>
<li><a href="#sec-3-5">3.5 参数数量可变的方法</a></li>
<li><a href="#sec-3-6">3.6 枚举类</a></li>
<li><a href="#sec-3-7">3.7 反射</a>
<ul>
<li><a href="#sec-3-7-1">3.7.1 利用反射分析类的能力</a></li>
<li><a href="#sec-3-7-2">3.7.2 在运行时使用反射分析对象</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">4 接口与内部类</a>
<ul>
<li><a href="#sec-4-1">4.1 接口</a></li>
<li><a href="#sec-4-2">4.2 对象克隆</a></li>
<li><a href="#sec-4-3">4.3 接口与回调</a></li>
<li><a href="#sec-4-4">4.4 内部类</a>
<ul>
<li><a href="#sec-4-4-1">4.4.1 内部类</a></li>
<li><a href="#sec-4-4-2">4.4.2 局部内部类</a></li>
<li><a href="#sec-4-4-3">4.4.3 匿名内部类</a></li>
<li><a href="#sec-4-4-4">4.4.4 静态内部类</a></li>
</ul>
</li>
<li><a href="#sec-4-5">4.5 代理</a></li>
</ul>
</li>
<li><a href="#sec-5">5 异常,日志,断言和调试</a>
<ul>
<li><a href="#sec-5-1">5.1 处理异常</a>
<ul>
<li><a href="#sec-5-1-1">5.1.1 异常结构</a></li>
<li><a href="#sec-5-1-2">5.1.2 声明已检查异常</a></li>
<li><a href="#sec-5-1-3">5.1.3 抛出异常</a></li>
<li><a href="#sec-5-1-4">5.1.4 捕获异常</a></li>
<li><a href="#sec-5-1-5">5.1.5 分析堆栈跟踪(stack trace)元素</a></li>
</ul>
</li>
<li><a href="#sec-5-2">5.2 断言</a></li>
<li><a href="#sec-5-3">5.3 记录日志</a>
<ul>
<li><a href="#sec-5-3-1">5.3.1 日志记录器</a></li>
<li><a href="#sec-5-3-2">5.3.2 修改日志管理器配置</a></li>
<li><a href="#sec-5-3-3">5.3.3 处理器</a></li>
<li><a href="#sec-5-3-4">5.3.4 过滤器</a></li>
<li><a href="#sec-5-3-5">5.3.5 格式化器</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-6">6 泛型程序设计</a>
<ul>
<li><a href="#sec-6-1">6.1 泛型类</a></li>
<li><a href="#sec-6-2">6.2 泛型方法</a></li>
<li><a href="#sec-6-3">6.3 限定类型变量</a></li>
<li><a href="#sec-6-4">6.4 类型擦除</a></li>
<li><a href="#sec-6-5">6.5 约束与局限</a></li>
<li><a href="#sec-6-6">6.6 泛型类型的继承规则</a></li>
<li><a href="#sec-6-7">6.7 通配符类型</a></li>
</ul>
</li>
<li><a href="#sec-7">7 集合</a>
<ul>
<li><a href="#sec-7-1">7.1 集合接口</a></li>
<li><a href="#sec-7-2">7.2 具体的集合</a>
<ul>
<li><a href="#sec-7-2-1">7.2.1 链表</a></li>
<li><a href="#sec-7-2-2">7.2.2 数组列表</a></li>
<li><a href="#sec-7-2-3">7.2.3 散列集</a></li>
<li><a href="#sec-7-2-4">7.2.4 树集</a></li>
<li><a href="#sec-7-2-5">7.2.5 队列与双端队列</a></li>
<li><a href="#sec-7-2-6">7.2.6 优先级队列</a></li>
<li><a href="#sec-7-2-7">7.2.7 映射表</a></li>
</ul>
</li>
<li><a href="#sec-7-3">7.3 集合框架</a>
<ul>
<li><a href="#sec-7-3-1">7.3.1 集合框架的接口</a></li>
<li><a href="#sec-7-3-2">7.3.2 集合框架的类</a></li>
<li><a href="#sec-7-3-3">7.3.3 视图</a></li>
<li><a href="#sec-7-3-4">7.3.4 集合与数组之间的转换</a></li>
</ul>
</li>
<li><a href="#sec-7-4">7.4 算法</a>
<ul>
<li><a href="#sec-7-4-1">7.4.1 排序和混排</a></li>
<li><a href="#sec-7-4-2">7.4.2 二分查找</a></li>
<li><a href="#sec-7-4-3">7.4.3 简单算法</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-8">8 多线程</a>
<ul>
<li><a href="#sec-8-1">8.1 线程概念</a></li>
<li><a href="#sec-8-2">8.2 中断线程</a>
<ul>
<li><a href="#sec-8-2-1">8.2.1 interrupt方法</a></li>
</ul>
</li>
<li><a href="#sec-8-3">8.3 线程状态</a></li>
<li><a href="#sec-8-4">8.4 线程属性</a>
<ul>
<li><a href="#sec-8-4-1">8.4.1 线程优先级</a></li>
<li><a href="#sec-8-4-2">8.4.2 守护线程</a></li>
</ul>
</li>
<li><a href="#sec-8-5">8.5 同步</a>
<ul>
<li><a href="#sec-8-5-1">8.5.1 锁对象</a></li>
<li><a href="#sec-8-5-2">8.5.2 条件对象</a></li>
<li><a href="#sec-8-5-3">8.5.3 synchronized关键字</a></li>
<li><a href="#sec-8-5-4">8.5.4 同步阻塞</a></li>
<li><a href="#sec-8-5-5">8.5.5 valatile域</a></li>
<li><a href="#sec-8-5-6">8.5.6 锁测试与超时</a></li>
<li><a href="#sec-8-5-7">8.5.7 读写锁</a></li>
</ul>
</li>
<li><a href="#sec-8-6">8.6 阻塞队列</a></li>
<li><a href="#sec-8-7">8.7 线程安全的集合</a>
<ul>
<li><a href="#sec-8-7-1">8.7.1 映射,集合和队列</a></li>
<li><a href="#sec-8-7-2">8.7.2 写数组的拷贝</a></li>
</ul>
</li>
<li><a href="#sec-8-8">8.8 Callable与Future</a></li>
<li><a href="#sec-8-9">8.9 执行器</a>
<ul>
<li><a href="#sec-8-9-1">8.9.1 线程池</a></li>
<li><a href="#sec-8-9-2">8.9.2 预订执行</a></li>
<li><a href="#sec-8-9-3">8.9.3 控制任务组</a></li>
</ul>
</li>
<li><a href="#sec-8-10">8.10 同步器</a>
<ul>
<li><a href="#sec-8-10-1">8.10.1 信号量</a></li>
<li><a href="#sec-8-10-2">8.10.2 倒计时门栓</a></li>
<li><a href="#sec-8-10-3">8.10.3 障栅</a></li>
<li><a href="#sec-8-10-4">8.10.4 交换器</a></li>
<li><a href="#sec-8-10-5">8.10.5 同步队列</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> java基本的程序设计结构</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 注释</h3>
<div class="outline-text-3" id="text-1-1">




<pre class="src src-java"><span style="color: #b22222;">// </span><span style="color: #b22222;">comment</span>

<span style="color: #b22222;">/*</span>
<span style="color: #b22222;">comment</span>
<span style="color: #b22222;">*/</span>

<span style="color: #8b2252;">/** </span>
<span style="color: #8b2252;">comment</span>
<span style="color: #8b2252;">*/</span>
</pre>

</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> java基本数据类型</h3>
<div class="outline-text-3" id="text-1-2">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="right" />
</colgroup>
<thead>
<tr><th scope="col" class="left">类型</th><th scope="col" class="right">存储(字节)</th></tr>
</thead>
<tbody>
<tr><td class="left">int</td><td class="right">4</td></tr>
<tr><td class="left">short</td><td class="right">2</td></tr>
<tr><td class="left">long</td><td class="right">8</td></tr>
<tr><td class="left">byte</td><td class="right">1</td></tr>
</tbody>
<tbody>
<tr><td class="left">float</td><td class="right">4</td></tr>
<tr><td class="left">double</td><td class="right">8</td></tr>
</tbody>
<tbody>
<tr><td class="left">char</td><td class="right"></td></tr>
</tbody>
<tbody>
<tr><td class="left">boolean</td><td class="right"></td></tr>
</tbody>
</table>

<ul>
<li>java中整型的范围与运行java代码的机器无关
</li>
<li>长整型有一个后缀L,float类型有一个后缀F
</li>
<li>十六进制有一个前缀0x,八进制有一个前缀0
</li>
<li>在很多情况下,float类型的精度很难满足需求
</li>
<li>强烈建议不在程序中使用char类型(编码的原因)
</li>
<li>整型值和布尔值之间不能相互转换
</li>
</ul>

</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 变量</h3>
<div class="outline-text-3" id="text-1-3">




<pre class="src src-java"><span style="color: #228b22;">double</span> <span style="color: #a0522d;">salary</span>;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>,<span style="color: #a0522d;">j</span>;
<span style="color: #a020f0;">final</span> <span style="color: #228b22;">double</span> <span style="color: #a0522d;">CONS</span>
</pre>

<ul>
<li>在java中,使用关键字final声明常量
</li>
</ul>

</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 运算符</h3>
<div class="outline-text-3" id="text-1-4">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">类型</th><th scope="col" class="left">运算符</th></tr>
</thead>
<tbody>
<tr><td class="left">算术运算符</td><td class="left">+ - * / %</td></tr>
<tr><td class="left">自增/减运算符</td><td class="left">++ &ndash;</td></tr>
<tr><td class="left">关系运算符</td><td class="left">== != &lt; &lt;= &gt; &gt;=</td></tr>
<tr><td class="left">布尔运算符</td><td class="left">&amp;&amp; &#124;&#124; !</td></tr>
<tr><td class="left">三元运算符</td><td class="left">:?</td></tr>
<tr><td class="left">位运算符</td><td class="left">&amp; &#124; ~ ^ &gt;&gt; <a name="" class="target"> </a></td></tr>
</tbody>
</table>

<ul>
<li>自动类型转换
<ol>
<li>如果两个操作数中有一个是double类型的,把另一个也转换为double类型
</li>
<li>否则,如果两个操作数中有一个是float类型的,把另一个也转换为float类型
</li>
<li>否则,如果两个操作数中有一个是long类型的,把另一个也转换为long类型
</li>
<li>否则,两个操作数都将被转换为int类型
</li>
</ol>

</li>
<li>强制类型转换
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span> = 3.14;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">nx</span> = (<span style="color: #228b22;">int</span>)x;
</pre>

</div>

</div>

<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 字符串</h3>
<div class="outline-text-3" id="text-1-5">

<ul>
<li>java没有内置的字符串类型,而是在标准库中提供了一个预定义类String
</li>
<li>每个用双引号括起来的字符串都是String类的一个实例
</li>
<li>String类没有提供用于修改字符串的方法,String类对象也称为不可变字符串,其好处是可以让字符串共享
</li>
<li>实际上某些情况下字符串常量是不共享的,因此 <b>不要</b> 使用==运算符测试字符串的相等性
</li>
</ul>


</div>

<div id="outline-container-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> String重要方法方法</h4>
<div class="outline-text-4" id="text-1-5-1">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.String

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#32473;&#23450;&#20301;&#32622;&#30340;&#20195;&#30721;&#21333;&#20803;</span>
<span style="color: #228b22;">char</span> <span style="color: #0000ff;">charAt</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>)                            

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25353;&#23383;&#20856;&#24207;&#27604;&#36739;,&#33509;&#23383;&#31526;&#20018;&#20301;&#20110;other&#20043;&#21069;,&#36820;&#22238;&#36127;&#25968;,&#20043;&#21518;&#36820;&#22238;&#27491;&#25968;,&#30456;&#31561;&#36820;&#22238;0</span>
<span style="color: #228b22;">int</span> compareTo(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">other</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#23383;&#31526;&#20018;&#20197;suffix&#32467;&#23614;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> endsWith(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">suffix</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#23383;&#31526;&#20018;&#19982;other&#30456;&#31561;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> equals(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">other</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#23383;&#31526;&#20018;&#19982;other&#30456;&#31561;(&#24573;&#30053;&#22823;&#23567;&#20889;),&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> equalsIgnoreCase(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">other</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23383;&#31526;&#20018;&#38271;&#24230;</span>
<span style="color: #228b22;">int</span> length()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;new&#20195;&#26367;&#21407;&#22987;&#23383;&#31526;&#20018;&#20013;&#30340;old,&#21487;&#20197;&#29992;String&#25110;StringBuilder&#23545;&#35937;&#20316;&#20026;CharSequence&#21442;&#25968;</span>
String replace(<span style="color: #228b22;">CharSequence</span> <span style="color: #a0522d;">old</span>,CharSequence <span style="color: #a020f0;">new</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23376;&#20018;</span>
String substring(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">beg</span>)
String substring(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">beg</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#21407;&#22987;&#23383;&#31526;&#20018;&#20013;&#25152;&#26377;&#22823;&#23567;&#20889;&#23383;&#27597;&#25913;&#25104;&#23567;(&#22823;)&#20889;&#23383;&#27597;</span>
String toLowerCase()
String toUpperCase()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#21407;&#22987;&#23383;&#31526;&#20018;&#22836;&#37096;&#21644;&#23614;&#37096;&#30340;&#31354;&#26684;</span>
String trim()
</pre>

</div>

</div>

<div id="outline-container-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> 构建字符串</h4>
<div class="outline-text-4" id="text-1-5-2">

<ul>
<li>采用字符串连接的方式构建字符串效率低,每次连接字符串都会构建一个新的String对象,既耗时由浪费空间
</li>
<li>StringBuilder可以避免这个问题
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">StringBuilder</span> <span style="color: #a0522d;">builder</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">StringBuilder</span>();
builder.append(str1);
builder.append(str2);
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">completeString</span> = builder.toString();
</pre>

</div>

</div>

<div id="outline-container-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> StringBuilder重要方法</h4>
<div class="outline-text-4" id="text-1-5-3">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.StringBuilder

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">length</span>()                                 <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26500;&#24314;&#22120;&#20013;&#23383;&#31526;&#25968;&#37327;       </span>
StringBuilder append(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>)             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36861;&#21152;&#19968;&#20010;&#23383;&#31526;&#20018;             </span>
StringBuilder append(<span style="color: #228b22;">char</span> <span style="color: #a0522d;">c</span>)                 <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36861;&#21152;&#19968;&#20010;&#23383;&#31526;               </span>
<span style="color: #228b22;">void</span> setCharAt(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>, <span style="color: #228b22;">char</span> <span style="color: #a0522d;">c</span>)                <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#31532;i&#20010;&#23383;&#31526;&#35774;&#32622;&#20026;c         </span>
StringBuilder insert(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;offset&#20301;&#32622;&#25554;&#20837;&#19968;&#20010;&#23383;&#31526;&#20018; </span>
StringBuilder insert(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">offset</span>, <span style="color: #228b22;">char</span> <span style="color: #a0522d;">c</span>)     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;offset&#20301;&#32622;&#25554;&#20837;&#19968;&#20010;&#23383;&#31526;   </span>
StringBuilder delete(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">beg</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>)       <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#20559;&#31227;&#37327;&#20174;beg&#21040;end-1&#30340;&#23383;&#31526; </span>
String toString()                            <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#19982;&#26500;&#24314;&#22120;&#20869;&#23481;&#30456;&#21516;&#30340;&#23383;&#31526;&#20018;</span>
</pre>


</div>
</div>

</div>

<div id="outline-container-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> 输入输出</h3>
<div class="outline-text-3" id="text-1-6">


</div>

<div id="outline-container-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> 标准输出</h4>
<div class="outline-text-4" id="text-1-6-1">




<pre class="src src-java">System.out.println(<span style="color: #8b2252;">"sth"</span>);
</pre>

</div>

</div>

<div id="outline-container-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> 格式化输出</h4>
<div class="outline-text-4" id="text-1-6-2">




<pre class="src src-java">System.out.printf(<span style="color: #8b2252;">"hello %s, next year you'll be%s"</span>,name,age);
</pre>

</div>

</div>

<div id="outline-container-1-6-3" class="outline-4">
<h4 id="sec-1-6-3"><span class="section-number-4">1.6.3</span> 标准输入</h4>
<div class="outline-text-4" id="text-1-6-3">

<ul>
<li id="sec-1-6-3-1">使用Scanner<br/>



<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Scanner</span>;
<span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">in</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(System.in);
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s1</span> = in.nextLine();<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35835;&#21462;&#19968;&#34892;</span>
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s2</span> = in.next();    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35835;&#21462;&#19968;&#20010;&#21333;&#35789;</span>
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span> = in.nextInt();     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35835;&#21462;&#19968;&#20010;&#25972;&#25968;</span>
<span style="color: #228b22;">double</span>= in.nextDouble();  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35835;&#21462;&#19968;&#20010;&#28014;&#28857;&#25968;</span>
</pre>

</li>
</ul>
<ul>
<li id="sec-1-6-3-2">使用Console<br/>



<pre class="src src-java"><span style="color: #228b22;">Console</span> <span style="color: #a0522d;">cons</span> = System.console();
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">str</span> = cons.readLine(<span style="color: #8b2252;">"prompt"</span>);
<span style="color: #228b22;">char</span>[] <span style="color: #a0522d;">passwd</span> = cons.readPassword(<span style="color: #8b2252;">"password"</span>);
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-1-6-4" class="outline-4">
<h4 id="sec-1-6-4"><span class="section-number-4">1.6.4</span> 读文件</h4>
<div class="outline-text-4" id="text-1-6-4">




<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Scanner</span>;
<span style="color: #228b22;">Scanner</span> <span style="color: #a0522d;">in</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Scanner</span>(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">File</span>(<span style="color: #8b2252;">"filename.ext"</span>));
</pre>

</div>

</div>

<div id="outline-container-1-6-5" class="outline-4">
<h4 id="sec-1-6-5"><span class="section-number-4">1.6.5</span> 写文件</h4>
<div class="outline-text-4" id="text-1-6-5">




<pre class="src src-java"><span style="color: #228b22;">PrintWriter</span> <span style="color: #a0522d;">out</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">PrintWriter</span>(<span style="color: #8b2252;">"filename.ext"</span>)
out.print(<span style="color: #8b2252;">"sth"</span>);
out.println(<span style="color: #8b2252;">"sth"</span>);
out.printf(<span style="color: #8b2252;">"%s"</span>,<span style="color: #8b2252;">"sth"</span>);
</pre>

</div>
</div>

</div>

<div id="outline-container-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> 控制流程</h3>
<div class="outline-text-3" id="text-1-7">


</div>

<div id="outline-container-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> 条件语句</h4>
<div class="outline-text-4" id="text-1-7-1">




<pre class="src src-java"><span style="color: #a020f0;">if</span>(condition)
    ...
<span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span>(conditon)
    ...
<span style="color: #a020f0;">else</span>
    ...
</pre>

</div>

</div>

<div id="outline-container-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> 循环语句</h4>
<div class="outline-text-4" id="text-1-7-2">

<ul>
<li id="sec-1-7-2-1">while循环<br/>



<pre class="src src-java"><span style="color: #a020f0;">while</span>(conditon)
    ...
</pre>

</li>
</ul>
<ul>
<li id="sec-1-7-2-2">do-while循环<br/>



<pre class="src src-java"><span style="color: #a020f0;">do</span>
    ...
<span style="color: #a020f0;">while</span>(condition);
</pre>

</li>
</ul>
<ul>
<li id="sec-1-7-2-3">for循环<br/>



<pre class="src src-java"><span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>=0; i&lt;10; i++)
    ...
</pre>


<pre class="src src-java"><span style="color: #a020f0;">for</span> (variable: collection)
    ...
<span style="color: #b22222;">//</span><span style="color: #b22222;">collection&#24517;&#39035;&#26159;&#19968;&#20010;&#25968;&#32452;&#25110;&#32773;&#26159;&#19968;&#20010;&#23454;&#29616;&#20102;Iterable&#25509;&#21475;&#30340;&#23545;&#35937;</span>
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> switch语句</h4>
<div class="outline-text-4" id="text-1-7-3">




<pre class="src src-java"><span style="color: #a020f0;">switch</span>(var){
    <span style="color: #a020f0;">case</span> case1:
        ...
        <span style="color: #a020f0;">break</span>;
    <span style="color: #a020f0;">case</span> case2:
        ...
        <span style="color: #a020f0;">break</span>;
    <span style="color: #a020f0;">default</span>:
        ...
}
</pre>

<ul>
<li>case标签必须是整数或枚举常量,不能测试字符串
</li>
</ul>

</div>

</div>

<div id="outline-container-1-7-4" class="outline-4">
<h4 id="sec-1-7-4"><span class="section-number-4">1.7.4</span> break和continue</h4>
<div class="outline-text-4" id="text-1-7-4">

<ul>
<li id="sec-1-7-4-1">带标签的break<br/>
<ul>
<li>用于跳出多重嵌套循环
</li>
<li>标签必须放在希望跳出的最外层循环之前,紧跟一个冒号
</li>
<li>执行带标签的break将跳转到带标签语句块末尾
</li>
</ul>

</li>
</ul>
<ul>
<li id="sec-1-7-4-2">带标签的continue<br/>
<ul>
<li>执行带标签的break将跳转到带标签语句块首部
</li>
</ul>

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> 数组</h3>
<div class="outline-text-3" id="text-1-8">


</div>

<div id="outline-container-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> 初始化数组</h4>
<div class="outline-text-4" id="text-1-8-1">




<pre class="src src-java"><span style="color: #228b22;">int</span>[] <span style="color: #a0522d;">a</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>[100];
<span style="color: #228b22;">int</span>[] <span style="color: #a0522d;">a</span> = {1,2,3,4,5};
<span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>[]{1,2,3,4,5};     #&#21311;&#21517;&#25968;&#32452;
</pre>

<ul>
<li>使用a.length获取数组长度
</li>
</ul>

</div>

</div>

<div id="outline-container-1-8-2" class="outline-4">
<h4 id="sec-1-8-2"><span class="section-number-4">1.8.2</span> Arrays重要方法</h4>
<div class="outline-text-4" id="text-1-8-2">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Arrays

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#36820;&#22238;&#19982;a&#31867;&#22411;&#30456;&#21516;&#30340;&#25968;&#32452;,&#22914;&#26524;length&#20540;&#22823;&#20110;a.length,&#32467;&#26524;&#20026;0&#25110;false,</span>
<span style="color: #b22222;">&#22914;&#26524;length&#20540;&#23567;&#20110;a.length,&#25968;&#32452;&#20013;&#23558;&#21482;&#26377;&#21069;&#38754;length&#20010;&#25968;&#25454;&#20803;&#32032;&#30340;&#25335;&#36125;*/</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">type</span> <span style="color: #0000ff;">copyOf</span>(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">length</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#32467;&#26524;&#20026;a&#20013;[beg,end-1)&#30340;&#25335;&#36125;,&#22914;&#26524;end&#22823;&#20110;a.length,&#32467;&#26524;&#20026;0&#25110;false</span>
<span style="color: #a020f0;">static</span> type copyOf(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">beg</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25968;&#32452;&#30340;&#23383;&#31526;&#20018;&#34920;&#31034;,&#25324;&#21495;&#21253;&#22260;,&#36887;&#21495;&#20998;&#38548;</span>
<span style="color: #a020f0;">static</span> String toString(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#20248;&#21270;&#30340;&#24555;&#36895;&#25490;&#24207;&#31639;&#27861;&#23545;&#25968;&#32452;&#36827;&#34892;&#25490;&#24207;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> sort(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#20108;&#20998;&#25628;&#32034;&#31639;&#27861;&#26597;&#25214;&#20540;v</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> binarySearch(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">type</span> <span style="color: #a0522d;">v</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#20108;&#20998;&#25628;&#32034;&#31639;&#27861;&#26597;&#25214;&#20540;v</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> binarySearch(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">beg</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">end</span>, <span style="color: #228b22;">type</span> <span style="color: #a0522d;">v</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#25968;&#32452;&#25152;&#26377;&#20803;&#32032;&#35774;&#32622;&#20026;v</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> fill(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">type</span> <span style="color: #a0522d;">v</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#20004;&#20010;&#25968;&#32452;&#22823;&#23567;&#30456;&#21516;,&#19988;&#19979;&#26631;&#30456;&#21516;&#30340;&#20803;&#32032;&#37117;&#23545;&#24212;&#30456;&#31561;,&#36820;&#22238;true</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> equals(<span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">type</span>[] <span style="color: #a0522d;">b</span>)
</pre>

</div>

</div>

<div id="outline-container-1-8-3" class="outline-4">
<h4 id="sec-1-8-3"><span class="section-number-4">1.8.3</span> 多维数组</h4>
<div class="outline-text-4" id="text-1-8-3">




<pre class="src src-java"><span style="color: #228b22;">int</span>[][] <span style="color: #a0522d;">multiArray</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">int</span>[2][2];
<span style="color: #228b22;">int</span>[][] <span style="color: #a0522d;">multiArray</span> = {{1,2},{3,4}};
</pre>

<ul>
<li>java实际上没有多维数组,只有一维数组,多为数组被解释为"数组的数组"
</li>
<li>因此,可以方便地构造不规则数组
</li>
</ul>

</div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 对象与类</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 使用现有类</h3>
<div class="outline-text-3" id="text-2-1">


</div>

<div id="outline-container-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> java.util.GregorianCalendar</h4>
<div class="outline-text-4" id="text-2-1-1">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">GregorianCalendar</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#26085;&#21382;&#23545;&#35937;,&#29992;&#26469;&#34920;&#31034;&#40664;&#35748;&#22320;&#21306;&#40664;&#35748;&#26102;&#21306;&#30340;&#24403;&#21069;&#26102;&#38388;</span>
<span style="color: #0000ff;">GregorianCalendar</span>()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#32473;&#23450;&#30340;&#26085;&#26399;&#21644;&#26102;&#38388;&#26500;&#36896;&#19968;&#20010;Gregorian&#26085;&#21382;&#23545;&#35937;</span>
GregorianCalendar(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>)
GregorianCalendar(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hour</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">minutes</span>,
                  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">seconds</span>)

<span style="color: #228b22;">int</span> get(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">field</span>)                     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#32473;&#23450;&#22495;&#30340;&#20540;,&#22914;Calendar.YEAR(MONTH)</span>
Date getTime()                         <span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#24471;&#36825;&#20010;&#26085;&#21382;&#23545;&#35937;&#24403;&#21069;&#20540;&#25152;&#34920;&#36798;&#30340;&#26102;&#38388;&#28857;</span>
<span style="color: #228b22;">int</span> getFirstDayOfWeek()                <span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#24471;&#24403;&#21069;&#29992;&#25143;&#25152;&#22312;&#22320;&#21306;&#19968;&#20010;&#26143;&#26399;&#20013;&#30340;&#31532;&#19968;&#22825;</span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">field</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">value</span>)         <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#29305;&#23450;&#22495;&#30340;&#20540;</span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#26085;&#26399;&#22495;&#35774;&#20026;&#26032;&#20540;</span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">year</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">month</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">day</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">hour</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">minutes</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">seconds</span>)
<span style="color: #228b22;">void</span> setTime(<span style="color: #228b22;">Date</span> <span style="color: #a0522d;">time</span>)                <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#26085;&#21382;&#35774;&#32622;&#20026;&#25351;&#23450;&#26102;&#38388;&#28857;</span>
<span style="color: #228b22;">void</span> add(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">field</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">amount</span>)        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23545;&#29305;&#23450;&#22495;&#36827;&#34892;&#22686;&#21152;&#21046;&#23450;&#25968;&#37327;&#30340;&#26102;&#38388;</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#26085;&#26399;&#22495;&#21644;&#26102;&#38388;&#22495;&#35774;&#20026;&#26032;&#20540;</span>
</pre>

</div>
</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 用户自定义类</h3>
<div class="outline-text-3" id="text-2-2">




<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">ClassName</span>{
    constructor1
    constructor2
    ...
    method1
    method2
    ...
    <span style="color: #228b22;">field1</span>
    <span style="color: #a0522d;">field2</span>
    ...
}
</pre>

<ul>
<li>可以认为java编译器内置了make功能,当java编译器发现a.java使用了b类时会查找b.class文件,如果没有找到,会自动搜索b.java并对其进行编译,如果b.java版本比已有的b.class新,java编译器会自动重新编译这个文件.
</li>
<li>在每一个方法中,关键字this表示隐式参数.
</li>
<li>为了封装实例域,应该提供三项内容:一个私有的实例域,一个公有的 <b>访问器</b>,一个公有的 <b>更改器</b>.
</li>
<li>一个方法可以访问所属类的 <b>所有对象</b> 的私有数据,即不仅可以访问所绑定对象的私有域,还可以访问其他对象的私有域.
</li>
<li>可以将实例域定义为final,在构造器执行之后,这个域的值被设置,并在后面的操作中不能在进行修改.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 静态域与静态方法</h3>
<div class="outline-text-3" id="text-2-3">

<p>使用static修饰符
</p><ul>
<li>静态域:类的所有实例共享一个静态域,即使没有对象实例,静态域也存在,它属于类而不属于任何独立对象
</li>
<li>静态方法:可以认为静态方法是没有this参数的方法,因此静态方法不能操作对象,因此不能在静态方法中访问实例域.
</li>
<li>在以下两种情况下使用静态方法
<ol>
<li>一个方法不需要访问对象状态,所需参数都是通过显示参数提供
</li>
<li>一个方法只需要访问类的静态域
</li>
</ol>

</li>
<li>静态方法常用于factory方法,产生不同风格的格式对象.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 方法参数</h3>
<div class="outline-text-3" id="text-2-4">

<ul>
<li>java程序设计语言总是采用值调用,即方法所得到的是参数值的一个拷贝
</li>
<li>方法参数公有两种类型:基本数据类型 对象引用
</li>
<li>一个方法不能修改一个基本数据类型的实参
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">tripleValue</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span>){  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#24182;&#19981;&#20250;&#25913;&#21464;&#21442;&#25968;&#30340;&#20540;</span>
    x = 3*x;
}
</pre>

<ul>
<li>一个方法可以改变一个对象实参的状态
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">tripleSalary</span>(<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">x</span>){
    <span style="color: #b22222;">//</span><span style="color: #b22222;">x&#26159;Employee&#31867;&#22411;&#30340;&#23545;&#35937;,&#21487;&#20197;&#22312;&#26041;&#27861;&#20013;&#25913;&#21464;&#35813;&#23545;&#35937;&#30340;&#29366;&#24577;</span>
    x.raiseSalary(200)
}
</pre>

<ul>
<li>一个方法不能实现让对象实参引用一个新对象
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">swap</span>(<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">y</span>){  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23454;&#21442;&#25152;&#24341;&#29992;&#30340;&#23545;&#35937;&#24182;&#27809;&#26377;&#24471;&#21040;&#20132;&#25442;</span>
    <span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">tmp</span> = x;
    x = y;
    y = tmp;
}
</pre>

</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 对象构造</h3>
<div class="outline-text-3" id="text-2-5">


</div>

<div id="outline-container-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> 对象初始化步骤</h4>
<div class="outline-text-4" id="text-2-5-1">

<ol>
<li>所有数据被初始化为默认值(0,false,null)
</li>
<li>按照在类声明中出现的顺序,依次执行所有<a href="#sec-2-5-2">域初始化语句</a>和<a href="#sec-2-5-3">初始化块</a>
</li>
<li>如果构造器第一行<a href="#sec-2-5-5">调用了第二个构造器</a>,则执行第二个构造器主体
</li>
<li>执行这个<a href="#sec-2-5-4">构造器</a>主体
</li>
</ol>

</div>

</div>

<div id="outline-container-2-5-2" class="outline-4">
<h4 id="sec-2-5-2"><span class="section-number-4">2.5.2</span> 域初始化</h4>
<div class="outline-text-4" id="text-2-5-2">

<p>可以在类定义中,直接将一个值赋给任何域
</p>


<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span>{
    ...
    <span style="color: #a020f0;">private</span> String name = <span style="color: #8b2252;">""</span>;
}
</pre>

</div>

</div>

<div id="outline-container-2-5-3" class="outline-4">
<h4 id="sec-2-5-3"><span class="section-number-4">2.5.3</span> 初始化块</h4>
<div class="outline-text-4" id="text-2-5-3">

<p>在一个类声明中,可以包含多个代码块,只要构造类的对象,这些块就会被执行
</p>


<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Employee</span>{
    <span style="color: #228b22;">constructor</span>
    ...
    <span style="color: #a0522d;">method</span>
    ...
    {
        id = nextID;
        ...
    }
}
</pre>

</div>

</div>

<div id="outline-container-2-5-4" class="outline-4">
<h4 id="sec-2-5-4"><span class="section-number-4">2.5.4</span> 构造器</h4>
<div class="outline-text-4" id="text-2-5-4">

<ul>
<li>构造器可以重载,如果编译器找不到匹配的参数或找出多个可能的匹配,会产生编译时错误
</li>
<li>默认构造器是指没有参数的构造器,如果在类中没有编写构造器,系统会提供一个默认构造器,如果类中至少编写了一个构造器,系统就不会再提供默认构造器.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-5-5" class="outline-4">
<h4 id="sec-2-5-5"><span class="section-number-4">2.5.5</span> 调用另一个构造器</h4>
<div class="outline-text-4" id="text-2-5-5">

<p>如果构造器的第一个语句形如this(&hellip;),这个构造器将调用同一个类的另一个构造器
</p>


<pre class="src src-java"><span style="color: #a020f0;">public</span> Employee(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">s</span>){
    <span style="color: #a020f0;">this</span>(<span style="color: #8b2252;">"Employee #"</span> + nextId, s);
    nextId++;
}
</pre>

</div>
</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> 包</h3>
<div class="outline-text-3" id="text-2-6">

<ul>
<li>一个类可以使用所属包中的所有类,以及其他包中的公有类
</li>
<li>访问另一个包中公有类的方式
<ol>
<li>在每个类名之前添加完整的包名
</li>
<li>使用import语句导入一个特定的类或者整个包
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#27599;&#20010;&#31867;&#21517;&#20043;&#21069;&#28155;&#21152;&#23436;&#25972;&#30340;&#21253;&#21517;</span>
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Date</span> <span style="color: #a0522d;">today</span> = <span style="color: #a020f0;">new</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Date</span>();

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20351;&#29992;import&#35821;&#21477;&#23548;&#20837;&#25972;&#20010;&#21253;,&#27880;&#24847;&#21482;&#33021;&#20351;&#29992;*&#21495;&#23548;&#20837;&#19968;&#20010;&#21253;,&#19981;&#33021;&#21516;&#26102;&#23548;&#20837;&#22810;&#20010;&#21253;</span>
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.*;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20351;&#29992;import&#35821;&#21477;&#23548;&#20837;&#19968;&#20010;&#29305;&#23450;&#30340;&#31867;</span>
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Date</span>;
</pre>

<ul>
<li>如果导入的两个或多个包中的类有名字冲突,会出现一个编译错误.有两种解决方式
<ol>
<li>增加一个特定的import语句来解决
</li>
<li>在每个类名前加上完整包名
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.*;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.*;      <span style="color: #b22222;">//</span><span style="color: #b22222;">&#37117;&#21547;&#26377;Date&#31867;,&#20986;&#29616;&#32534;&#35793;&#24322;&#24120;</span>

<span style="color: #008b8b;">&#35299;&#20915;1</span>:
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.*;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.*;
<span style="color: #a020f0;">import</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Date</span>;  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22686;&#21152;&#19968;&#20010;&#29305;&#23450;&#30340;import&#35821;&#21477;&#26469;&#35299;&#20915;</span>

<span style="color: #008b8b;">&#35299;&#20915;2</span>:
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">u</span><span style="color: #228b22;">til.Date</span> <span style="color: #a0522d;">deadline</span> = <span style="color: #a020f0;">new</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Date</span>();
<span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.<span style="color: #228b22;">Date</span> <span style="color: #a0522d;">today</span> = <span style="color: #a020f0;">new</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">sql</span>.<span style="color: #228b22;">Date</span>(..);   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#27599;&#20010;&#31867;&#21517;&#21069;&#21152;&#19978;&#23436;&#25972;&#21253;&#21517;</span>
</pre>

<ul>
<li>可以通过静态导入来导入静态方法和静态域
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">import</span> <span style="color: #a020f0;">static</span> <span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.System.<span style="color: #228b22;">out</span>;
</pre>

<ul>
<li>想要将一个类放入包中,必须将包名放在源文件的开头,包中定义类的代码之前.
</li>
<li>将包中的文件放到与完整包名匹配的子目录中
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">package</span> com.horstmann.<span style="color: #008b8b;">corejava</span>;
...
</pre>

<ul>
<li>如果没有在源文件中放置package语句,这个源文件中的类就被放置在一个默认包中
</li>
<li>没有指定public或private的方法或者域可以被同一个包中的所有方法访问,称包作用域.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> 类路径</h3>
<div class="outline-text-3" id="text-2-7">

<p>为了使类能够被多个程序共享,需要做到以下几点
</p><ol>
<li>把类放到一个目录中
</li>
<li>把jar文件放到一个目录中
</li>
<li>设置类路径,类路径是所有包含类文件的路径的集合
<ul>
<li>用-classpath指定类路径
</li>
<li>通过设置CLASSPATH环境变量指定类路径
</li>
</ul>

</li>
</ol>




<pre class="src src-bash">java -classpath ... prog.java
export CLASSPATH=...:..:...
</pre>


</div>

</div>

<div id="outline-container-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> 小结</h3>
<div class="outline-text-3" id="text-2-8">

<p>实例域是实例拥有数据,静态域是类拥有的数据;所有方法都属于类:普通方法与特定实例绑定,并且由实例调用;静态方法不与任何实例绑定,可以由类或实例调用.
</p></div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 继承</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 类,超类和子类</h3>
<div class="outline-text-3" id="text-3-1">




<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">Manager</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Employee</span>{
    &#28155;&#21152;&#26041;&#27861;&#21644;&#22495;
}
</pre>

<ul>
<li>extends表示正在构造的新类派生于一个已经存在的类,已存在的类称为超类,新类称为子类
</li>
<li>可以在子类中定义方法覆盖超类中的同名方法
</li>
<li>在子类中定义方法覆盖超类中的同名方法时,子类依然继承了超类中的同名方法,只是超类中的方法被子类中的方法覆盖了,若要访问超类中的同名方法,使用super.method()
</li>
<li>子类虽然继承了超类的私有域,但是子类的方法不能直接访问超类的私有域,只有超类的方法才能访问私有部分
</li>
<li>在子类构造器中调用超类的构造器super(&hellip;),使用super调用构造器的语句必须是子类构造器的第一条语句
</li>
<li>如果子类构造器没有显式调用超类的构造器,则将自动地调用超类默认构造器,如果超类没有不带参数的构造器且在在子类中没有显式调用超类的其他构造器,则java编译器将报错
</li>
</ul>


</div>

<div id="outline-container-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><span class="section-number-4">3.1.1</span> 多态</h4>
<div class="outline-text-4" id="text-3-1-1">

<ul>
<li>在java中,对象变量是多态的,一个Employee变量既可以引用一个Employee类对象,也可以引用一个Employee类的任何子类对象.
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">e</span>;
e = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Employee</span>(...);
e = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Manager</span>(...);
</pre>

<ul>
<li>然而,不能将一个超类的引用赋给子类的变量
</li>
</ul>

</div>

</div>

<div id="outline-container-3-1-2" class="outline-4">
<h4 id="sec-3-1-2"><span class="section-number-4">3.1.2</span> 动态绑定</h4>
<div class="outline-text-4" id="text-3-1-2">

<p>调用对象方法的执行过程
</p><ol>
<li>编译器查看对象的 <b>声明类型</b> 和方法名
</li>
<li>编译器查看调用方法时提供的参数类型(重载解析)
</li>
<li>如果是private方法,static方法,final方法或构造器,编译器将可以确定调用哪个方法(静态绑定)
</li>
<li>如果调用的方法依赖于隐式参数的实际类型,在运行时实现动态绑定,虚拟机调用对象 <b>实际类型</b> 中的方法(如果实际类型中没有定义这个方法,将在其超类中寻找)
</li>
</ol>

</div>

</div>

<div id="outline-container-3-1-3" class="outline-4">
<h4 id="sec-3-1-3"><span class="section-number-4">3.1.3</span> 阻止继承</h4>
<div class="outline-text-4" id="text-3-1-3">

<ul>
<li>如果在定义类的时候使用了final修饰符,表明这个类是final类,该类不能被继承
</li>
<li>类中的方法也可以被声明为final,这样做,子类就不能覆盖这个方法
</li>
</ul>

<ul>
<li id="sec-3-1-3-1">final用法总结<br/>
<ol>
<li>final+局部变量
<blockquote>

<p>表示常量   
</p>
</blockquote>


</li>
<li>final+实例域
<blockquote>

<p>在构造器执行之后,这个域的值被设置,并在后面的操作中不能在进行修改
</p>
</blockquote>


</li>
<li>final+方法
<blockquote>

<p>子类不能覆盖此方法
</p>
</blockquote>


</li>
<li>final+类
<blockquote>

<p>此类不能被继承
</p>
</blockquote>


</li>
</ol>

</li>
</ul>
</div>

</div>

<div id="outline-container-3-1-4" class="outline-4">
<h4 id="sec-3-1-4"><span class="section-number-4">3.1.4</span> 强制类型转换</h4>
<div class="outline-text-4" id="text-3-1-4">




<pre class="src src-java"><span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">boss</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Manager</span>(...);
<span style="color: #228b22;">Manager</span> <span style="color: #a0522d;">boss</span> = (<span style="color: #228b22;">Manager</span>)boss;
</pre>

<ul>
<li>强制类型转换的唯一原因是:在暂时忽视对象的实际类型之后,使用对象的全部功能
</li>
<li>只能在继承层次内进行类型转换
</li>
<li>在将超类转换成子类之前,应该使用instanceof进行检查
</li>
<li>如果试图在继承链上进行向下的类型转换,并且"谎报"有关对象包含的内容,将产生ClassCastException异常
</li>
</ul>

</div>

</div>

<div id="outline-container-3-1-5" class="outline-4">
<h4 id="sec-3-1-5"><span class="section-number-4">3.1.5</span> 抽象类</h4>
<div class="outline-text-4" id="text-3-1-5">

<p>从某种角度看,祖先类更加通用,人们只将它作为派生其他类的积累,而不想作为想使用的特定的实例类
</p>


<pre class="src src-java"><span style="color: #a020f0;">abstract</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">Person</span>{
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">abstract</span> <span style="color: #228b22;">String</span> <span style="color: #0000ff;">getDescription</span>();
}
</pre>

<ul>
<li>使用abstract关键字将一个方法变为抽象方法,就不需要实现这个方法了
</li>
<li>抽象方法充当着占位的角色,它们的具体实现在子类中.
</li>
<li>包含抽象方法的类本身必须被声明为抽象方法
</li>
<li>除了抽象方法,抽象类还可以包含具体数据和具体方法
</li>
<li>类即使不含有抽象方法,也可以将类声明为抽象类
</li>
<li>抽象类不能被实例化,但可以定义一个抽象类的对象变量,引用非抽象子类的对象
</li>
</ul>

</div>

</div>

<div id="outline-container-3-1-6" class="outline-4">
<h4 id="sec-3-1-6"><span class="section-number-4">3.1.6</span> 受保护的访问</h4>
<div class="outline-text-4" id="text-3-1-6">

<p>使用protected关键字声明的方法或域,对本包和所有子类可见
</p>


<pre class="example">将超类Employee中的hireDay声明为protected,而不是私有的,Manager中的方法就可以直接访问它

不过,Manager类中的方法只能够访问Manager对象中的hireDay域,
而不能访问其他Employee对象中的这个域
</pre>

<ul>
<li id="sec-3-1-6-1">访问修饰符总结:<br/>
<ol>
<li>仅对本类可见 private
</li>
<li>对所有类可见 public
</li>
<li>对本包和所有子类可见 protected
</li>
<li>对本包可见 默认
</li>
</ol>

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> object 所有类的超类</h3>
<div class="outline-text-3" id="text-3-2">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Object

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21253;&#21547;&#23545;&#35937;&#20449;&#24687;&#30340;&#31867;&#23545;&#35937;</span>
<span style="color: #228b22;">Class</span> <span style="color: #0000ff;">getClass</span>()

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#27604;&#36739;&#20004;&#20010;&#23545;&#35937;&#26159;&#21542;&#30456;&#31561;,&#22914;&#26524;&#20004;&#20010;&#23545;&#35937;&#25351;&#21521;&#21516;&#19968;&#22359;&#23384;&#20648;&#21306;&#22495;,</span>
<span style="color: #b22222;">&#26041;&#27861;&#36820;&#22238;true,&#21542;&#21017;&#36820;&#22238;flase,&#22312;&#33258;&#23450;&#20041;&#31867;&#20013;,&#24212;&#35813;&#35206;&#30422;&#36825;&#20010;*/</span>
<span style="color: #228b22;">boolean</span> equals(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">otherObject</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25551;&#36848;&#35813;&#23545;&#35937;&#20540;&#30340;&#23383;&#31526;&#20018;,&#22312;&#33258;&#23450;&#20041;&#31867;&#20013;,&#24212;&#35813;&#35206;&#30422;&#36825;&#20010;&#26041;&#27861;</span>
String toString()

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#30340;&#21103;&#26412;,java&#36816;&#34892;&#26102;&#23558;&#20026;&#26032;&#23454;&#20363;&#20998;&#37197;&#23384;&#20648;&#31354;&#38388;,</span>
<span style="color: #b22222;">&#24182;&#23558;&#24403;&#21069;&#23545;&#35937;&#22797;&#21046;&#21040;&#36825;&#22359;&#23384;&#20648;&#21306;&#22495;&#20013;*/</span>
Object clone()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Class

<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getName</span>()      <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#31867;&#30340;&#21517;&#23383;</span>
Class getSuperclass() <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20197;Class&#23545;&#35937;&#30340;&#24418;&#24335;&#36820;&#22238;&#36825;&#20010;&#31867;&#30340;&#36229;&#31867;&#20449;&#24687;</span>
</pre>

</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 泛型数组列表</h3>
<div class="outline-text-3" id="text-3-3">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.ArrayList&lt;T&gt;

ArrayList&lt;T&gt;()                    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#31354;&#25968;&#32452;&#21015;&#34920;</span>
ArrayList&lt;T&gt;(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#25351;&#23450;&#23481;&#37327;&#26500;&#36896;&#19968;&#20010;&#31354;&#25968;&#32452;&#21015;&#34920;</span>
<span style="color: #228b22;">boolean</span> add(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">obj</span>)                <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#25968;&#32452;&#21015;&#34920;&#30340;&#23614;&#31471;&#28155;&#21152;&#19968;&#20010;&#20803;&#32032;,&#27704;&#36828;&#36820;&#22238;true</span>
<span style="color: #228b22;">int</span> size()                        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23384;&#20648;&#22312;&#25968;&#32452;&#21015;&#34920;&#20013;&#30340;&#24403;&#21069;&#20803;&#32032;&#25968;&#37327;</span>
<span style="color: #228b22;">void</span> trimToSize()                 <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#25968;&#32452;&#21015;&#34920;&#30340;&#23384;&#20648;&#23481;&#37327;&#21066;&#20943;&#21040;&#24403;&#21069;&#23610;&#23544;</span>
T get(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>)                  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#24471;&#25351;&#23450;&#20301;&#32622;&#30340;&#20803;&#32032;&#20540;</span>
<span style="color: #228b22;">void</span> add(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">obj</span>)        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#25351;&#23450;&#20301;&#32622;&#25554;&#20837;&#20803;&#32032;</span>
T remove(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>)               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#19968;&#20010;&#20803;&#32032;,&#36820;&#22238;&#34987;&#21024;&#38500;&#30340;&#20803;&#32032;</span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">obj</span>)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#25968;&#32452;&#21015;&#34920;&#25351;&#23450;&#20301;&#32622;&#30340;&#20803;&#32032;&#20540;,&#36825;&#20010;&#25805;&#20316;&#23558;&#35206;&#30422;&#36825;&#20010;&#20301;&#32622;&#21407;&#26377;&#30340;&#20869;&#23481;</span>
<span style="color: #228b22;">void</span> ensureCapacity(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">capacity</span>)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#30830;&#20445;&#25968;&#32452;&#21015;&#34920;&#22312;&#19981;&#37325;&#26032;&#20998;&#37197;&#23384;&#20648;&#31354;&#38388;&#30340;&#24773;&#20917;&#19979;&#23601;&#33021;&#20445;&#23384;&#32473;&#23450;&#25968;&#37327;&#30340;&#20803;</span>

</pre>

</div>

</div>

<div id="outline-container-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 对象包装器</h3>
<div class="outline-text-3" id="text-3-4">

<ul>
<li>有时,需要将int这样的基本类型转换为对象,所有基本类型都有一个与之对应的类,通常这些类称为包装器.
</li>
<li>包装器在很多情况下可以自动打包,拆包
</li>
</ul>




<pre class="src src-java">list.add(3) &#23558;&#33258;&#21160;&#21464;&#25442;&#25104; list.add(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">Integer</span>(3))
<span style="color: #228b22;">int</span> n = list.get(i) &#23558;&#33258;&#21160;&#21464;&#25442;&#25104; <span style="color: #228b22;">int</span> n = list.get(i).intValue()

&#22312;&#31639;&#25968;&#34920;&#36798;&#24335;&#20013;&#20063;&#33021;&#22815;&#33258;&#21160;&#25171;&#21253;&#21644;&#25286;&#21253;:
Integer n = 3;
n++;
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Integer

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">intValue</span>()                              <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22238;Integer&#23545;&#35937;&#30340;int&#20540;</span>
<span style="color: #a020f0;">static</span> String toString(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>)               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25968;&#20540;i&#30340;&#21313;&#36827;&#21046;&#23383;&#31526;&#20018;&#34920;&#31034;</span>
<span style="color: #a020f0;">static</span> String toString(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>,<span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>)     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25968;&#20540;i&#30340;radix&#36827;&#21046;&#23383;&#31526;&#20018;&#34920;&#31034;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> parseInt(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>)               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23383;&#31526;&#20018;s&#34920;&#31034;&#30340;&#25972;&#25968;&#20540;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> parseInt(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>)    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23383;&#31526;&#20018;s&#34920;&#31034;&#30340;&#25972;&#25968;&#20540;</span>
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23383;&#31526;&#20018;s&#34920;&#31034;&#30340;&#25972;&#22411;&#25968;&#20540;&#23545;&#24212;&#30340;&#21253;&#35013;&#22120;&#23545;&#35937;</span>
<span style="color: #a020f0;">static</span> Integer valueOf(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23383;&#31526;&#20018;s&#34920;&#31034;&#30340;&#25972;&#22411;&#25968;&#20540;&#23545;&#24212;&#30340;&#21253;&#35013;&#22120;&#23545;&#35937;</span>
<span style="color: #a020f0;">static</span> Integer valueOf(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">radix</span>) 
</pre>

</div>

</div>

<div id="outline-container-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> 参数数量可变的方法</h3>
<div class="outline-text-3" id="text-3-5">




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#23450;&#20041;:</span>
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> <span style="color: #228b22;">double</span> <span style="color: #0000ff;">max</span>(<span style="color: #228b22;">double</span>... <span style="color: #a0522d;">values</span>){
    <span style="color: #228b22;">double</span> <span style="color: #a0522d;">largest</span> = <span style="color: #008b8b;">Double</span>.MIN_VALUE;
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">double</span> <span style="color: #a0522d;">v</span> : values)
        <span style="color: #a020f0;">if</span>(v&gt;largest)
            largest = v;
    <span style="color: #a020f0;">return</span> largest;
}
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35843;&#29992;:</span>
<span style="color: #228b22;">double</span> <span style="color: #a0522d;">m</span> = max(3.1,40.4,-5);

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#23454;&#38469;&#19978;,max&#25509;&#25910;&#30340;&#26159;&#19968;&#20010;values[]&#25968;&#32452;,&#20854;&#20013;&#20445;&#23384;&#30528;&#25152;&#26377;&#30340;&#21442;&#25968;</span>
<span style="color: #b22222;">&#32534;&#35793;&#22120;&#38656;&#35201;&#23545;max&#30340;&#27599;&#27425;&#35843;&#29992;&#36827;&#34892;&#36716;&#25442;,&#23558;&#21442;&#25968;&#32465;&#23450;&#30340;&#25968;&#32452;&#19978;,</span>
<span style="color: #b22222;">&#27492;&#22788;&#26159;&#23558;new double[]{3.1,40.4,5}&#20256;&#36882;&#32473;max&#26041;&#27861;</span>
<span style="color: #b22222;">&#30456;&#24403;&#20110;*/</span>
<span style="color: #228b22;">double</span> <span style="color: #a0522d;">m</span> = max(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">double</span>[]{3.1,40.4,5})
</pre>

</div>

</div>

<div id="outline-container-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> 枚举类</h3>
<div class="outline-text-3" id="text-3-6">




<pre class="src src-java"><span style="color: #228b22;">pubic</span> <span style="color: #a020f0;">enum</span> Size {<span style="color: #a0522d;">SMALL</span>, <span style="color: #a0522d;">MEDIUM</span>, <span style="color: #a0522d;">LARGE</span>, <span style="color: #a0522d;">EXTRA_LARGE</span>};
</pre>

<p>
实际上,这个声明定义的类型是一个类,它刚好有4个实例.
如果需要的话,可以在枚举类型中添加一些构造器,方法或域
</p>


<pre class="src src-java"><span style="color: #a020f0;">enum</span> <span style="color: #228b22;">Size</span>{
    <span style="color: #a0522d;">SMALL</span>(<span style="color: #8b2252;">"S"</span>), <span style="color: #a0522d;">MEDIUM</span>(<span style="color: #8b2252;">"M"</span>), <span style="color: #a0522d;">LARGE</span>(<span style="color: #8b2252;">"L"</span>), <span style="color: #a0522d;">EXTRA_LAREGE</span>(<span style="color: #8b2252;">"XL"</span>);
    <span style="color: #a020f0;">private</span> Size(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">abbreviation</span>) {<span style="color: #a020f0;">this</span>.abbreviation = abbreviation;}
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">getAbbreviation</span>(){<span style="color: #a020f0;">return</span> abbreviation;}
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">abbreviation</span>;
}

<span style="color: #228b22;">String</span> <span style="color: #a0522d;">abbrev</span> = <span style="color: #008b8b;">Size</span>.SMALL.getAbbreviation();
</pre>

<p>
所有枚举类型都是Emnum类的子类
</p>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Enum

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26522;&#20030;&#24120;&#37327;&#21517;</span>
<span style="color: #228b22;">String</span> <span style="color: #0000ff;">toString</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26522;&#20030;&#24120;&#37327;&#22312;enum&#22768;&#26126;&#20013;&#30340;&#20301;&#32622;,&#20174;0&#24320;&#22987;&#35745;&#25968;</span>
<span style="color: #228b22;">int</span> ordinal()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#26522;&#20030;&#24120;&#37327;&#20986;&#29616;&#22312;other&#20043;&#21069;,&#36820;&#22238;&#19968;&#20010;&#36127;&#20540;,&#33509;this==other,&#36820;&#22238;0,&#21542;&#21017;,&#36820;&#22238;&#27491;&#20540;</span>
<span style="color: #228b22;">int</span> compareTo(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">other</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25351;&#23450;&#21517;&#23383;,&#32473;&#23450;&#31867;&#30340;&#26522;&#20030;&#24120;&#37327;</span>
<span style="color: #a020f0;">static</span> Enum valueOf(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">enumClass</span>, <span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>)
</pre>

</div>

</div>

<div id="outline-container-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> 反射</h3>
<div class="outline-text-3" id="text-3-7">

<p>能够分析类的能力的程序被称为反射
</p>
</div>

<div id="outline-container-3-7-1" class="outline-4">
<h4 id="sec-3-7-1"><span class="section-number-4">3.7.1</span> 利用反射分析类的能力</h4>
<div class="outline-text-4" id="text-3-7-1">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Class

<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Class</span> <span style="color: #0000ff;">forName</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">className</span>)  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25551;&#36848;&#31867;&#21517;&#20026;className&#30340;Class&#23545;&#35937;</span>
Object newInstance()                    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#31867;&#30340;&#26032;&#23454;&#20363;</span>
Field[] getFields()                     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#27492;&#31867;&#21644;&#36229;&#31867;&#30340;&#30340;&#20844;&#26377;&#22495;</span>
Field[] getDeclaredFields()             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#27492;&#31867;&#30340;&#20840;&#37096;&#22495;</span>
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25152;&#26377;&#20844;&#26377;&#26041;&#27861;,&#21253;&#25324;&#20174;&#36229;&#31867;&#32487;&#25215;&#26469;&#30340;&#20844;&#26377;&#26041;&#27861;</span>
Method[] getMethods()                   
Method[] getDeclaredMethods()           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#20840;&#37096;&#26041;&#27861;,&#20294;&#19981;&#21253;&#25324;&#20174;&#36229;&#31867;&#32487;&#25215;&#30340;&#26041;&#27861;</span>
Constructor[] getConstructors()         <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#27492;&#31867;&#30340;&#20844;&#26377;&#26500;&#36896;&#22120;</span>
Constructor[] getDeclaredConstructors() <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#27492;&#31867;&#30340;&#25152;&#26377;&#26500;&#36896;&#22120;</span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Constructor(<span style="color: #228b22;">Method</span> <span style="color: #a0522d;">Field</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#36825;&#20010;&#26500;&#36896;&#22120;&#25152;&#23646;&#31867;&#30340;&#26032;&#23454;&#20363;</span>
Object newInstance(<span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">args</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26500;&#36896;&#22120;(&#26041;&#27861; &#22495;&#21517;)&#30340;Class&#23545;&#35937;</span>
Class getDeclaringClass()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#29992;&#20110;&#25551;&#36848;&#26500;&#36896;&#22120;(&#26041;&#27861; &#22495;&#21517;)&#20462;&#39280;&#31526;&#30340;&#25972;&#22411;&#25968;&#20540;</span>
<span style="color: #228b22;">int</span> getModifiers()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25551;&#36848;&#26500;&#36896;&#22120;(&#26041;&#27861; &#22495;&#21517;)&#30340;&#23383;&#31526;&#20018;</span>
String getName()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#22312;Constructor&#21644;Method&#31867;&#20013;,&#36820;&#22238;&#19968;&#20010;&#25551;&#36848;&#21442;&#25968;&#31867;&#22411;&#30340;Class&#23545;&#35937;&#25968;&#32452;</span>
Class[] getParameterTypes()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#22312;Method&#31867;&#20013;,&#36820;&#22238;&#19968;&#20010;&#29992;&#20110;&#25551;&#36848;&#36820;&#22238;&#31867;&#22411;&#30340;Class&#23545;&#35937;</span>
Class getReturnType()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Modifier

<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">isAbstract</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">modifiers</span>)
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> isFinal(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">modifiers</span>)   
...                                     
</pre>

</div>

</div>

<div id="outline-container-3-7-2" class="outline-4">
<h4 id="sec-3-7-2"><span class="section-number-4">3.7.2</span> 在运行时使用反射分析对象</h4>
<div class="outline-text-4" id="text-3-7-2">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.AccessibleObject

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#20026;&#21453;&#23556;&#23545;&#35937;&#35774;&#32622;&#21487;&#35775;&#38382;&#26631;&#24535;,flag&#20026;true&#34920;&#26126;&#23631;&#34109;java&#35821;&#35328;&#30340;&#35775;&#38382;&#26816;&#26597;,</span>
<span style="color: #b22222;">&#20351;&#24471;&#23545;&#35937;&#30340;&#31169;&#26377;&#23646;&#24615;&#20063;&#21487;&#20197;&#34987;&#26597;&#35810;&#21644;&#35774;&#32622;*/</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setAccessible</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">flag</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21453;&#23556;&#23545;&#35937;&#30340;&#21487;&#35775;&#38382;&#26631;&#24535;&#30340;&#20540;</span>
<span style="color: #228b22;">boolean</span> isAccessible()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#23545;&#35937;&#25968;&#32452;&#21487;&#35775;&#38382;&#26631;&#24535;&#30340;&#24555;&#25463;&#26041;&#27861;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> setAccessible(<span style="color: #228b22;">AccessibleObject</span>[] <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">flag</span>)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Class

<span style="color: #228b22;">Field</span> <span style="color: #0000ff;">getField</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>)         <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25351;&#23450;&#21517;&#31216;&#30340;&#20844;&#26377;&#22495;</span>
Field getDeclaredField(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">name</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#25351;&#23450;&#21517;&#31216;&#30340;&#22495;    </span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Field

<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">get</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>)               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;obj&#23545;&#35937;&#20013;Field&#23545;&#35937;&#34920;&#31034;&#30340;&#20540;            </span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>,<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">newValue</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;newValue&#35774;&#32622;obj&#23545;&#35937;&#20013;&#29992;Field&#23545;&#35937;&#34920;&#31034;&#30340;&#22495;</span>
</pre>

</div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 接口与内部类</h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 接口</h3>
<div class="outline-text-3" id="text-4-1">

<p>java不允许多继承,因为多继承会让语言本身变得非常复杂,效率也会降低,java利用接口机制来实现多继承的大部分功能
</p>


<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Comparable</span>{
    <span style="color: #228b22;">int</span> <span style="color: #0000ff;">compareTo</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">other</span>);
}
</pre>

<ul>
<li>接口中的所有方法自动属于public,因此在接口中声明方法时,不必提供关键字public
</li>
<li>接口中不能含有实例域,静态方法,可以包含常量
</li>
<li>不能在接口中实现方法
</li>
<li>不能使用new实例化一个接口
</li>
<li>可以声明接口类型的变量,用于引用实现了接口的类对象
</li>
<li>接口可以继承
</li>
<li>每个类可以实现多个接口
</li>
</ul>

</div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 对象克隆</h3>
<div class="outline-text-3" id="text-4-2">

<ul>
<li>当拷贝一个变量时,原始变量与拷贝变量引用同一个对象(浅拷贝)
</li>
<li>如果原始对象与浅克隆对象共享的子对象是不可变的,将不会产生任何问题
</li>
<li>clone方法是Object类的protected方法,用户在代码中无法直接调用,只有Employee类才能克隆Employee对象
</li>
<li>可以重新定义public访问修饰符的clone方法,并实现Cloneable接口
</li>
<li>Cloneable接口是java提供的几个标记接口之一,标记接口中没有定义任何方法,使用它的唯一目的是可以用instanceof进行类型检查
</li>
</ul>

</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 接口与回调</h3>
<div class="outline-text-3" id="text-4-3">

<ul>
<li>回调是一种常见的程序设计模式,可以指出某个特定事件发生时应该采取的动作(比如各种Listener)
</li>
<li>很多程序设计语言中通过提供一个函数表示要采取的动作,java是通过提供一个对象来表示要采取的动作
</li>
<li>由于对象可以携带附加信息,所以传递一个对象比传递一个函数灵活
</li>
<li>当然,程序需要知道调用对象的哪一个方法,因此通常所传递的对象需要实现某个特定的接口
</li>
</ul>

</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> 内部类</h3>
<div class="outline-text-3" id="text-4-4">

<p>使用内部类的主要原因
</p><ol>
<li>内部类方法可以访问该类定义所在作用域中的数据,包括私有数据
</li>
<li>内部类可以对同一个包中的其他类隐藏起来
</li>
<li>想要定义一个回调函数又不想编写大量代码时,使用匿名内部类比较便捷
</li>
</ol>


</div>

<div id="outline-container-4-4-1" class="outline-4">
<h4 id="sec-4-4-1"><span class="section-number-4">4.4.1</span> 内部类</h4>
<div class="outline-text-4" id="text-4-4-1">




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">TalkingClock</span>{
    <span style="color: #a020f0;">public</span> TalkingClock(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">interval</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">beep</span>){..}

    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">interval</span>;
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">beep</span>;

    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">TimePrinter</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">ActionListener</span>{...}  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20869;&#37096;&#31867;</span>
}
</pre>

<ul>
<li>内部类既可以访问自身的数据域,也可以访问创建它的外围对象的数据域
</li>
<li>在内部类中使用OuterClass.this引用外围类
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">if</span>(beep) Toolkit.getDefaultToolkit().beep();
&#31561;&#20215;&#20110;
<span style="color: #a020f0;">if</span>(TalkingClock.<span style="color: #a020f0;">this</span>.beep) Toolkit.getDefaultToolkit().beep();
</pre>

<ul>
<li>在外部类中定义内部类的对象
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">new</span> <span style="color: #228b22;">TimePrinter</span>();
&#31561;&#20215;&#20110;
<span style="color: #a020f0;">this</span>.<span style="color: #a020f0;">new</span> <span style="color: #228b22;">TimePrinter</span>();
</pre>

<ul>
<li>在外部类的外部定义公有内部类的对象
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">TalkingClock</span> <span style="color: #a0522d;">jabberer</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">TalkingClock</span>(1000,<span style="color: #008b8b;">true</span>);
<span style="color: #008b8b;">TalkingClock</span>.<span style="color: #228b22;">TimerPrinter</span> <span style="color: #a0522d;">listener</span> = jabberer.<span style="color: #a020f0;">new</span> <span style="color: #228b22;">TimePrinter</span>();
</pre>

</div>

</div>

<div id="outline-container-4-4-2" class="outline-4">
<h4 id="sec-4-4-2"><span class="section-number-4">4.4.2</span> 局部内部类</h4>
<div class="outline-text-4" id="text-4-4-2">

<ul>
<li>在一个局部的块(比如方法)中定义的内部类称局部内部类,局部内部类不能用public或private访问修饰符,块之外的方法不能访问到这个内部类
</li>
<li>局部内部类不仅可以访问外部类,还可以访问final局部变量
</li>
<li>由于局部变量在生命周期结束后会被销毁,因此内部类会建立一份局部变量的拷贝.为了使得局部变量和局部内部类中建立的拷贝保持一致,所以局部内部类可以访问的局部变量必须是final类型的
</li>
<li>如果需要在局部内部类中访问一个可变的局部变量,可以使用一个长度为1的final数组
</li>
</ul>

</div>

</div>

<div id="outline-container-4-4-3" class="outline-4">
<h4 id="sec-4-4-3"><span class="section-number-4">4.4.3</span> 匿名内部类</h4>
<div class="outline-text-4" id="text-4-4-3">




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">start</span>(){
    <span style="color: #228b22;">ActionListener</span> <span style="color: #a0522d;">listener</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ActionListener</span>(){
        ...
    }
    ...
}
</pre>

<ul>
<li>如果new后面跟的是接口的名字,其含义是创建一个实现该接口的类的对象
</li>
<li>如果new后面跟的是类的名字,其含义是创建一个继承了该类的派生类的对象
</li>
<li>由于构造器的名字必须与类名相同,而匿名类没有类名,所以匿名类没有构造器,构造器参数将传递给超类
</li>
</ul>

</div>

</div>

<div id="outline-container-4-4-4" class="outline-4">
<h4 id="sec-4-4-4"><span class="section-number-4">4.4.4</span> 静态内部类</h4>
<div class="outline-text-4" id="text-4-4-4">

<p>声明为static,静态内部类的对象除了不能访问外部类对象,与其他内部类完全一样
</p><ul>
<li id="sec-4-4-4-1">static用法总结<br/>
<ol>
<li>static+域
<blockquote>

<p>静态域.该域只有一份拷贝,所有实例共享.
</p>
</blockquote>


</li>
<li>static+方法
<blockquote>

<p>静态方法.该方法不与实例绑定,通过类名或实例来调用.
</p>
</blockquote>


</li>
<li>static+内部类
<blockquote>

<p>静态内部类.静态内部类的方法不能访问外部类.
</p>
</blockquote>


</li>
</ol>

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> 代理</h3>
<div class="outline-text-3" id="text-4-5">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.InvocationHandler   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35843;&#29992;&#22788;&#29702;&#22120;</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23450;&#20041;&#20102;&#20195;&#29702;&#23545;&#35937;&#35843;&#29992;&#26041;&#27861;&#26102;&#24076;&#26395;&#25191;&#34892;&#30340;&#21160;&#20316;</span>
<span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invoke</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">proxy</span>, <span style="color: #228b22;">Method</span> <span style="color: #a0522d;">method</span>, <span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">args</span>)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.<span style="color: #008b8b;">reflect</span>.Proxy   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20195;&#29702;</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#23454;&#29616;&#25351;&#23450;&#25509;&#21475;&#30340;&#20195;&#29702;&#31867;&#30340;&#23454;&#20363;,&#25152;&#26377;&#26041;&#27861;&#37117;&#23558;&#35843;&#29992;&#32473;&#23450;&#22788;&#29702;&#22120;&#23545;&#35937;&#30340;invoke&#26041;&#27861;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">getProxyInstance</span>(<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">loader</span>, <span style="color: #228b22;">Class</span>[] <span style="color: #a0522d;">interfaces</span>, 
                               <span style="color: #228b22;">InvocationHandler</span> <span style="color: #a0522d;">handler</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#23454;&#29616;&#25351;&#23450;&#25509;&#21475;&#30340;&#20195;&#29702;&#31867;</span>
<span style="color: #a020f0;">static</span> Class getProxyClass(<span style="color: #228b22;">ClassLoader</span> <span style="color: #a0522d;">loader</span>, <span style="color: #228b22;">Class</span>[] <span style="color: #a0522d;">interfaces</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;c&#26159;&#19968;&#20010;&#20195;&#29702;&#31867;,&#36820;&#22238;true</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> isProxyClass(<span style="color: #228b22;">Class</span> <span style="color: #a0522d;">c</span>)
</pre>

<ul>
<li>首先获得代理对象,传入类加载器,接口的类,以及调用处理器
</li>
<li>由代理对象调用某方法时,会调用调用处理器的invoke方法,并向其传递Method对象和原始的调用参数,可以在invoke方法中实现调用前的预处理,调用,调用后的善后,即所谓的代理
</li>
<li>常见形式
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">I</span>{...} <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23450;&#20041;&#25509;&#21475;</span>

<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">C</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">I</span>{...} <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23450;&#20041;&#23454;&#29616;&#25509;&#21475;&#30340;&#31867;,&#20854;&#23545;&#35937;&#38656;&#35201;&#34987;&#20195;&#29702;</span>

<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyProxy</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">InvocationHandler</span>{
    <span style="color: #a020f0;">private</span> <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">target</span>; 
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">bind</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">target</span>){  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20256;&#20837;&#34987;&#20195;&#29702;&#30340;&#23545;&#35937;</span>
        <span style="color: #a020f0;">this</span>.target = target;
        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#29983;&#25104;&#20195;&#29702;&#23545;&#35937;</span>
        proxy = Proxy.newProxyInstance(target.getClass().getClassLoader(), 
                target.getClass().getInterfaces(), <span style="color: #a020f0;">this</span>);
        <span style="color: #a020f0;">return</span> proxy;
    }

    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Object</span> <span style="color: #0000ff;">invoke</span>(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">proxy</span>, <span style="color: #228b22;">Method</span> <span style="color: #a0522d;">method</span>, <span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">args</span>) 
        <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">Throwable</span>
    {
        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#36825;&#37324;&#39044;&#22788;&#29702;</span>
        <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">result</span> = method.invoke(target,args); <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35843;&#29992;&#26041;&#27861;</span>
        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#36825;&#37324;&#21892;&#21518;</span>
        <span style="color: #a020f0;">return</span> result;
    }
}

<span style="color: #228b22;">MyProxy</span> <span style="color: #a0522d;">proxy</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">MyProxy</span>();  
<span style="color: #228b22;">I</span> <span style="color: #a0522d;">i</span> = (<span style="color: #228b22;">I</span>)proxy.bind(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">C</span>());
I.method();  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35843;&#29992;&#26041;&#27861;&#26102;,&#23558;&#35843;&#29992;&#35843;&#29992;&#22788;&#29702;&#22120;&#30340;invoke&#26041;&#27861;</span>
</pre>

</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 异常,日志,断言和调试</h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 处理异常</h3>
<div class="outline-text-3" id="text-5-1">


</div>

<div id="outline-container-5-1-1" class="outline-4">
<h4 id="sec-5-1-1"><span class="section-number-4">5.1.1</span> 异常结构</h4>
<div class="outline-text-4" id="text-5-1-1">




<pre class="example">+ Throwable
  - Error
  - Exception
    + Runtime Exception
    + 其他异常
</pre>

<ul>
<li>Error层次结构描述了java运行时系统的内部错误和资源耗尽错误
</li>
<li>Exception层次结构中
<ol>
<li>由程序错误导致的异常属于RuntimeException 常见的RuntimeException异常:
<ul>
<li>错误的类型转换
</li>
<li>数组访问越界
</li>
<li>访问空指针
</li>
</ul>

</li>
<li>程序本身没有问题,但由于像IO错误这类问题导致的异常属于其他异常 常见的其他异常:
<ul>
<li>试图在文件尾部后读取数据
</li>
<li>试图打开一个错误的URL
</li>
</ul>

</li>
</ol>

</li>
<li>将派生于Error类或RuntimeException类的所有异常称为未检查异常
</li>
<li>将所有其他的异常称为已检查异常
</li>
</ul>

</div>

</div>

<div id="outline-container-5-1-2" class="outline-4">
<h4 id="sec-5-1-2"><span class="section-number-4">5.1.2</span> 声明已检查异常</h4>
<div class="outline-text-4" id="text-5-1-2">

<ul>
<li>方法应该在其首部声明所有可能抛出的异常
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #228b22;">Image</span> <span style="color: #0000ff;">loadImage</span>(<span style="color: #228b22;">String</span> <span style="color: #a0522d;">s</span>) <span style="color: #a020f0;">throws</span> <span style="color: #228b22;">IOException</span>,<span style="color: #228b22;">MalformURLException</span>
{
    ...
}
</pre>

<ul>
<li>需要声明异常的情况
<ol>
<li>调用一个抛出已检查异常的方法
</li>
<li>程序运行时发现错误,且利用throw语句抛出一个已检查异常
</li>
</ol>

</li>
<li>总之,一个方法必须声明所有可能抛出的已检查异常,而未检查异常要么不可控制,要么就应该避免发生.
</li>
<li>如果方法没有声明所有可能发生的已检查异常,编译器就会给出一个错误消息
</li>
</ul>

</div>

</div>

<div id="outline-container-5-1-3" class="outline-4">
<h4 id="sec-5-1-3"><span class="section-number-4">5.1.3</span> 抛出异常</h4>
<div class="outline-text-4" id="text-5-1-3">

<ul>
<li>对于已存在的异常类
<ol>
<li>找到一个合适的异常类
</li>
<li>创建这个类的一个对象
</li>
<li>将对象抛出
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">throw</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">EOFException</span>();
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25110;</span>
<span style="color: #228b22;">EOFException</span> <span style="color: #a0522d;">e</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">EOFException</span>();
<span style="color: #a020f0;">throw</span> e;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;</span>
<span style="color: #a020f0;">while</span>(...){
    <span style="color: #a020f0;">if</span>(!in.hasNext()){
        <span style="color: #a020f0;">if</span>(n&lt;len)
            <span style="color: #a020f0;">throw</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">EOFException</span>();
    }
}
</pre>

<ul>
<li>如果任何标准异常类都没有充分描述清除问题,需要创建自己的异常类,定义一个派生于Exception或派生于Exception子类的类.习惯上,定义的类应该包含两个构造器,一个默认构造器,一个带有详细描述信息的构造器
</li>
</ul>

</div>

</div>

<div id="outline-container-5-1-4" class="outline-4">
<h4 id="sec-5-1-4"><span class="section-number-4">5.1.4</span> 捕获异常</h4>
<div class="outline-text-4" id="text-5-1-4">




<pre class="src src-java"><span style="color: #a020f0;">try</span>{
    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#38656;&#35201;&#25191;&#34892;&#30340;&#20195;&#30721;</span>
}
<span style="color: #a020f0;">catch</span>(<span style="color: #228b22;">Exception1</span> <span style="color: #a0522d;">e1</span>){
    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23545;Exception1&#30340;&#22788;&#29702;</span>
}
<span style="color: #a020f0;">catch</span>(<span style="color: #228b22;">Exception2</span> <span style="color: #a0522d;">e2</span>){
    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23545;Exception2&#30340;&#22788;&#29702;</span>
}
...
<span style="color: #a020f0;">finally</span>{
    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#19981;&#31649;&#26159;&#21542;&#26377;&#24322;&#24120;&#34987;&#25429;&#33719;,&#36825;&#37324;&#30340;&#20195;&#30721;&#37117;&#20250;&#34987;&#25191;&#34892;</span>
}
</pre>

<ul>
<li>如果在try语句块中的代码抛出了一个在catch子句中说明的异常类,那么
<ol>
<li>程序将跳过try语句块的其余代码
</li>
<li>程序将执行catch子句中的处理器代码
</li>
</ol>

</li>
<li>如果在try语句块中的代码没有抛出异常,那么程序将跳过catch子句
</li>
<li>如果方法中任何代码抛出了一个在catch子句中没有声明的异常类型,这个方法就会立刻退出
</li>
<li>强烈建议独立使用try/catch和try/finally语句块,内层的try语句确保善后工作,外层的try语句确保报告错误
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">try</span>{
    <span style="color: #a020f0;">try</span>{
        ...
    }
    <span style="color: #a020f0;">finally</span>{
        in.close();
    }
}
<span style="color: #a020f0;">catch</span>(<span style="color: #228b22;">IOException</span> <span style="color: #a0522d;">e</span>){
    ...
}
</pre>

</div>

</div>

<div id="outline-container-5-1-5" class="outline-4">
<h4 id="sec-5-1-5"><span class="section-number-4">5.1.5</span> 分析堆栈跟踪(stack trace)元素</h4>
<div class="outline-text-4" id="text-5-1-5">

<ul>
<li>可以调用Throwable类的printStackTrace方法访问堆栈跟踪的文本描述信息
</li>
<li>可以调用getStackTrace方法获得一个StackTraceElement对象的数组,并在程序中进行分析
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">t</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Throwable</span>();
<span style="color: #228b22;">StackTraceElement</span>[] <span style="color: #a0522d;">frames</span> = t.getStackTrace();
<span style="color: #a020f0;">for</span>(<span style="color: #228b22;">StackTraceElement</span> <span style="color: #a0522d;">frame</span>:frames){
    ...
}
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.StackTraceElement

<span style="color: #228b22;">String</span> <span style="color: #0000ff;">getFileName</span>()     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#28304;&#25991;&#20214;&#21517;                                    </span>
<span style="color: #228b22;">int</span> getLineNumber()      <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#20803;&#32032;&#36816;&#34892;&#26102;&#23545;&#24212;&#30340;&#28304;&#25991;&#20214;&#34892;&#25968;              </span>
String getClassName()    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#20803;&#32032;&#36816;&#34892;&#26102;&#23545;&#24212;&#30340;&#31867;&#30340;&#20840;&#21517;                </span>
String getMethodName()   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#20803;&#32032;&#36816;&#34892;&#26102;&#23545;&#24212;&#30340;&#26041;&#27861;&#21517;                  </span>
<span style="color: #228b22;">boolean</span> isNativeMethod() <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#36825;&#20010;&#20803;&#32032;&#36816;&#34892;&#26102;&#22312;&#19968;&#20010;&#26412;&#22320;&#26041;&#27861;&#20013;,&#36820;&#22238;true     </span>
String toString()        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#21253;&#21547;&#31867;&#21517;,&#26041;&#27861;&#21517;,&#25991;&#20214;&#21517;&#21644;&#34892;&#25968;&#30340;&#26684;&#24335;&#21270;&#23383;&#31526;</span>
</pre>

</div>
</div>

</div>

<div id="outline-container-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> 断言</h3>
<div class="outline-text-3" id="text-5-2">

<ul>
<li>断言机制允许在测试期间向代码中插入一些检查语句,当代码发布时,这些检查语句将被自动地移走
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">assert</span> <span style="color: #a0522d;">x</span>&gt;= 0;
</pre>

<ul>
<li>对条件进行检测,如果结果为false,则抛出AssertionError异常
</li>
<li>默认情况下,断言被禁用.可以在运行程序时使用-enableassertions或-ea选项启用
</li>
</ul>




<pre class="src src-bash">java -enableassertions MyApp
#&#21487;&#20197;&#22312;&#26576;&#20010;&#31867;&#25110;&#32773;&#21253;&#20013;&#20351;&#29992;&#26029;&#35328;
java -ea:MyClass -ea:com.mycompany.mylib ... MyApp
#&#21487;&#20197;&#29992;-disableassertions&#25110;-da&#31105;&#29992;&#26576;&#20010;&#29305;&#23450;&#31867;&#21644;&#21253;&#30340;&#26029;&#35328;
java -ea:... -da:MyClasss MyApp
</pre>

<ul>
<li>在启用或禁用断言时不必重新编译程序
</li>
</ul>

</div>

</div>

<div id="outline-container-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> 记录日志</h3>
<div class="outline-text-3" id="text-5-3">


</div>

<div id="outline-container-5-3-1" class="outline-4">
<h4 id="sec-5-3-1"><span class="section-number-4">5.3.1</span> 日志记录器</h4>
<div class="outline-text-4" id="text-5-3-1">

<ul>
<li>创建日志记录器
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">Logger</span> <span style="color: #a0522d;">mylogger</span> = Logger.getLogger(<span style="color: #8b2252;">"com.mycompany.myapp"</span>);
</pre>

<ul>
<li>通常,有以下7个日志记录器级别
<ol>
<li>SEVERE
</li>
<li>WARNING
</li>
<li>INFO
</li>
<li>CONFIG
</li>
<li>FINE
</li>
<li>FINER
</li>
<li>FINEST
</li>
</ol>

</li>
<li>默认情况下,只记录前三个级别,可以设置其他的级别
</li>
</ul>




<pre class="src src-java">logger.setLevel(<span style="color: #008b8b;">Level</span>.FINE);  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#24320;&#21551;FINE&#21644;&#26356;&#39640;&#32423;&#21035;&#30340;&#35760;&#24405;</span>
logger.setLevel(<span style="color: #008b8b;">Level</span>.ALL)    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#24320;&#21551;&#25152;&#26377;&#32423;&#21035;&#30340;&#35760;&#24405;</span>
logger.setLevel(<span style="color: #008b8b;">Level</span>.OFF)    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20851;&#38381;&#25152;&#26377;&#32423;&#21035;&#30340;&#35760;&#24405;</span>
</pre>

<ul>
<li>记录日志
</li>
</ul>




<pre class="src src-java">logger.warning(message);
logger.log(<span style="color: #008b8b;">Level</span>.FINE,message);
</pre>

<ul>
<li>默认日志记录将显示类名,方法名
</li>
</ul>

</div>

</div>

<div id="outline-container-5-3-2" class="outline-4">
<h4 id="sec-5-3-2"><span class="section-number-4">5.3.2</span> 修改日志管理器配置</h4>
<div class="outline-text-4" id="text-5-3-2">

<ul>
<li>配置文件存在于jre/lib/logging.properties
</li>
<li>要想使用另一个配置文件,使用下列命令
</li>
</ul>




<pre class="src src-bash">java -Djava.util.logging.config.file=configFile MainClass
</pre>

</div>

</div>

<div id="outline-container-5-3-3" class="outline-4">
<h4 id="sec-5-3-3"><span class="section-number-4">5.3.3</span> 处理器</h4>
<div class="outline-text-4" id="text-5-3-3">

<ul>
<li>与日志记录器一样,处理器也有日志记录级别,对于一条要被记录的日志,它的日志级别必须高于日志记录器和处理器的阈值
</li>
<li>在默认情况下,日志记录器将记录发送到自己的处理器和父处理器.如果不想两次看到这些记录,应该将useParentHandlers属性设为false
</li>
</ul>




<pre class="src src-java">logger.setUseParentHandlers(<span style="color: #008b8b;">false</span>);
<span style="color: #228b22;">Handler</span> <span style="color: #a0522d;">handler</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ConsoleHandler</span>();
handler.setLevel(<span style="color: #008b8b;">Level</span>.FINE);
logger.addHandler(handler);
</pre>

<ul>
<li>可以通过扩展Handler类或StreamHandler类自定义处理器
</li>
</ul>

</div>

</div>

<div id="outline-container-5-3-4" class="outline-4">
<h4 id="sec-5-3-4"><span class="section-number-4">5.3.4</span> 过滤器</h4>
<div class="outline-text-4" id="text-5-3-4">

<ul>
<li>默认情况下,过滤器根据日志级别进行过滤,每个日志记录器和处理器都可以有一个可选的过滤器来完成附加的过滤
</li>
<li>想要将一个过滤器安装到一个日志记录器或处理器中,只要调用setFilter方法
</li>
<li>每个日志记录器和处理器同一时刻最多只能有一个过滤器
</li>
<li>可以通过实现Filter接口自定义过滤器
</li>
</ul>

</div>

</div>

<div id="outline-container-5-3-5" class="outline-4">
<h4 id="sec-5-3-5"><span class="section-number-4">5.3.5</span> 格式化器</h4>
<div class="outline-text-4" id="text-5-3-5">

<ul>
<li>ConsoleHandler类和FileHandler类可以生成文本和XML格式的日志记录
</li>
<li>可以自定义格式,需要扩展Formatter类并覆盖String format(LogRecord record)方法
</li>
<li>调用setFormatter方法将格式化器安装到处理器中
</li>
</ul>

</div>
</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 泛型程序设计</h2>
<div class="outline-text-2" id="text-6">

<ul>
<li>泛型程序设计意味着编写的代码可以被很多不同类型的对象所重用
</li>
<li>在泛型出现之前,使用Object变量,对具体类型进行操作时需要进行强制类型转换,且没有类型错误检查
</li>
<li>泛型使用类型参数来指示元素的类型,编译器可以很好地利用这个参数,get的时候不需要进行强制类型转换,add的时候可以进行类型检查,避免插入错误类型的对象
</li>
<li>类型参数使得程序具有更好的可读性和安全性
</li>
</ul>


</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> 泛型类</h3>
<div class="outline-text-3" id="text-6-1">




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyClass</span>&lt;T,<span style="color: #228b22;">U</span>&gt;{
    ...
}
</pre>

<p>
用具体的类型替换类型变量,就可以实例化泛型类型
</p>


<pre class="src src-java">MyClass&lt;String,String&gt;()
</pre>

<p>
泛型类可以看做普通类的工厂
</p></div>

</div>

<div id="outline-container-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> 泛型方法</h3>
<div class="outline-text-3" id="text-6-2">




<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyClass</span>{
    <span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;T&gt; T getMiddle(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">a</span>){
        ...
    }
}
</pre>

<ul>
<li>类型变量放在修饰符后,返回类型前
</li>
<li>调用一个泛型方法,在方法名前的尖括号中放入具体类型
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">String</span>[] <span style="color: #a0522d;">names</span>={<span style="color: #8b2252;">"zoe"</span>,<span style="color: #8b2252;">"chao"</span>};
<span style="color: #228b22;">String</span> <span style="color: #a0522d;">middle</span> = MyClass.&lt;String&gt;getMiddle(names);
</pre>

</div>

</div>

<div id="outline-container-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> 限定类型变量</h3>
<div class="outline-text-3" id="text-6-3">




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;T&#38480;&#23450;&#20026;&#23454;&#29616;&#20102;Comparable&#25509;&#21475;&#21644;Serializable&#25509;&#21475;</span>
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span> &amp; Serializable&gt; T min(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">a</span>){
    ...
}
</pre>

<ul>
<li>用逗号分隔类型变量,用&amp;分隔限定类型
</li>
<li>限定中最多有一个类,可以有多个接口
</li>
<li>如果限定中有一个类,它必须是限定类表中的第一个
</li>
</ul>

</div>

</div>

<div id="outline-container-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> 类型擦除</h3>
<div class="outline-text-3" id="text-6-4">

<p>虚拟机没有泛型类型对象,所有对象都属于普通类.因此在程序编译时需要对泛型类型对象进行转换,即类型擦除.
</p><ul>
<li>无论何时定义一个泛型类型,都自动提供了一个相应的原始类型
</li>
<li>原始类型的名字就是删去类型参数后的泛型类型名
</li>
<li>擦除类型变量,并替换为限定类型(无限定类型的变量用Object)
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#28304;&#20195;&#30721;</span>
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyClass</span>&lt;T,<span style="color: #228b22;">U</span>,<span style="color: #228b22;">W</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>,<span style="color: #228b22;">V</span> <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&amp;Serializable&gt;{
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">T</span> <span style="color: #a0522d;">first</span>;
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">U</span> <span style="color: #a0522d;">second</span>;
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">W</span> <span style="color: #a0522d;">third</span>;
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">V</span> <span style="color: #a0522d;">fourth</span>;
}
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36716;&#25442;&#21518;</span>
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyClass</span>{           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21407;&#22987;&#31867;&#22411;&#21517;&#23601;&#26159;MyClass</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">first</span>;        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25830;&#38500;&#20102;&#31867;&#22411;&#21464;&#37327;T,&#26367;&#25442;&#20026;&#20102;Object</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">second</span>;       <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25830;&#38500;&#20102;&#31867;&#22411;&#21464;&#37327;U,&#26367;&#25442;&#20026;&#20102;Object</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Comparable</span> <span style="color: #a0522d;">third</span>;    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25830;&#38500;&#20102;&#31867;&#22411;&#21464;&#37327;W,&#26367;&#25442;&#20026;&#20102;&#38480;&#23450;&#31867;&#22411;Comparable</span>
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">Comparable</span> <span style="color: #a0522d;">fourth</span>;   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25830;&#38500;&#20102;&#31867;&#22411;&#21464;&#37327;V,&#26367;&#25442;&#20026;&#20102;&#31532;&#19968;&#20010;&#38480;&#23450;&#31867;&#22411;Comparable</span>
}
</pre>

<ul>
<li>当程序调用泛型方法时,编译器插入强制类型转换
</li>
</ul>




<pre class="src src-java">Pair&lt;Employee&gt; buddies = ...;
<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#31867;&#22411;&#25830;&#38500;&#21518;,getFirst&#30340;&#36820;&#22238;&#31867;&#22411;&#23558;&#26159;Object,&#32534;&#35793;&#22120;&#33258;&#21160;&#25554;&#20837;Employee&#24378;&#21046;&#31867;&#22411;&#36716;&#25442;</span>
<span style="color: #b22222;">  &#32534;&#35793;&#22120;&#25226;&#36825;&#20010;&#26041;&#27861;&#35843;&#29992;&#32763;&#35793;&#20026;&#20004;&#26465;&#34394;&#25311;&#26426;&#25351;&#20196;</span>
<span style="color: #b22222;">  1. &#23545;&#21407;&#22987;&#26041;&#27861;Pair.getFirst&#30340;&#35843;&#29992;</span>
<span style="color: #b22222;">  2. &#23558;&#36820;&#22238;&#30340;Object&#31867;&#22411;&#24378;&#21046;&#36716;&#25442;&#20026;Employee&#31867;&#22411;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">buddy</span> = buddies.getFirst();   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26041;&#27861;&#36820;&#22238;&#31867;&#22411;&#24378;&#21046;&#36716;&#25442;</span>
<span style="color: #228b22;">Employee</span> <span style="color: #a0522d;">buddy</span> = buddies.first;        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23646;&#24615;&#31867;&#22411;&#24378;&#21046;&#36716;&#25442;</span>
</pre>

</div>

</div>

<div id="outline-container-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 约束与局限</h3>
<div class="outline-text-3" id="text-6-5">

<p>以下的限制大都是由类型擦除引起的
</p><ul>
<li>不能用基本类型实例化类型参数
</li>
<li>运行时类型查询只适用于原始类型
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">if</span>(a <span style="color: #a020f0;">instanceof</span> Pair&lt;String&gt;)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#25928;&#20110;</span>
<span style="color: #a020f0;">if</span>(a <span style="color: #a020f0;">instanceof</span> Pair)  <span style="color: #b22222;">//</span><span style="color: #b22222;">Pair&#26159;Pair&lt;String&gt;&#30340;&#21407;&#22987;&#31867;&#22411;</span>
</pre>

<ul>
<li>不能抛出也不能捕获泛型类型实例
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Throwable</span>&gt; <span style="color: #228b22;">void</span> doWork(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">t</span>)
{
    <span style="color: #a020f0;">try</span>{
        ...
    }
    <span style="color: #a020f0;">catch</span>(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">e</span>){    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#38169;&#35823;!!</span>
        ...
    }
}
<span style="color: #b22222;">/* </span><span style="color: #b22222;">&#21487;&#20197;&#22312;&#24322;&#24120;&#22768;&#26126;&#20013;&#20351;&#29992;&#38480;&#23450;&#31867;&#22411; */</span>
<span style="color: #a020f0;">public</span> <span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Throwable</span>&gt; <span style="color: #228b22;">void</span> doWork(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">t</span>)
{
    <span style="color: #a020f0;">try</span>{
        ...
    }
    <span style="color: #a020f0;">catch</span>(<span style="color: #228b22;">Throwable</span> <span style="color: #a0522d;">e</span>){
        ...
    }
}
</pre>

<ul>
<li>参数类型的数组不合法
</li>
<li>不能实例化类型变量
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">new</span> <span style="color: #228b22;">T</span>(...)  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#38169;&#35823;!!</span>
<span style="color: #a020f0;">new</span> <span style="color: #228b22;">T</span>[...]  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#38169;&#35823;!!</span>
</pre>

<ul>
<li>不能在静态域或方法中引用类型变量
</li>
</ul>

</div>

</div>

<div id="outline-container-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> 泛型类型的继承规则</h3>
<div class="outline-text-3" id="text-6-6">

<ul>
<li>假设Manager类继承了Employee类
</li>
<li>ArrayList&lt;T&gt;实现了List&lt;T&gt;
</li>
<li>ArrayList&lt;Manager&gt;与ArrayList&lt;Employee&gt;没有任何继承关系
</li>
<li>ArrayList&lt;Manager&gt;类型的对象可以被List&lt;Manager&gt;类型引用
</li>
</ul>

</div>

</div>

<div id="outline-container-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> 通配符类型</h3>
<div class="outline-text-3" id="text-6-7">

<ul>
<li>&lt;? extends Class/Interface&gt; 表示类型参数是Class/Interface的子类
</li>
<li>&lt;? super Class/Interface&gt; 表示类型参数是Class/Interface的超类
</li>
<li>带有超类型限定的通配符可以向泛型对象写入
</li>
<li>带有子类型限定的通配符可以从泛型对象读取
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">/*</span><span style="color: #b22222;">Pair&lt;? extends Employee&gt;&#30340;setFirst&#26041;&#27861;&#19981;&#33021;&#34987;&#35843;&#29992;</span>
<span style="color: #b22222;">  &#22240;&#20026;&#32534;&#35793;&#22120;&#21482;&#30693;&#36947;&#38656;&#35201;&#26576;&#20010;Employee&#30340;&#23376;&#31867;&#22411;,&#20294;&#19981;&#30693;&#36947;&#20855;&#20307;&#26159;&#20160;&#20040;&#31867;&#22411;</span>
<span style="color: #b22222;">*/</span>
? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Employee</span> getFirst()
<span style="color: #228b22;">void</span> setFirst(? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Employee</span>)

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#32534;&#35793;&#22120;&#19981;&#30693;&#36947;setFirst&#26041;&#27861;&#30340;&#30830;&#20999;&#31867;&#22411;,&#20294;&#26159;&#21487;&#20197;&#20256;&#20837;&#20219;&#24847;Manager&#30340;&#23545;&#35937;&#21450;&#23376;&#31867;&#30340;&#23545;&#35937;</span>
<span style="color: #b22222;">  &#36825;&#26679;&#21487;&#20197;&#20445;&#35777;&#19968;&#20010;&#26356;&#20855;&#20307;&#30340;&#23545;&#35937;&#36171;&#20540;&#32473;&#20102;&#19968;&#20010;&#26356;&#25277;&#35937;&#30340;&#23545;&#35937;</span>
<span style="color: #b22222;">  &#22914;&#26524;&#35843;&#29992;getFirst,&#36820;&#22238;&#23545;&#35937;&#23558;&#19981;&#20250;&#24471;&#21040;&#20445;&#35777;,&#21482;&#33021;&#25226;&#23427;&#36171;&#32473;&#19968;&#20010;Object&#31867;&#22411;</span>
<span style="color: #b22222;">*/</span>
<span style="color: #228b22;">void</span> setFirst(? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">Manager</span>)
? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">Manager</span> getFirst()
</pre>

</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 集合</h2>
<div class="outline-text-2" id="text-7">


</div>

<div id="outline-container-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> 集合接口</h3>
<div class="outline-text-3" id="text-7-1">

<ul>
<li>java集合类库将接口与实现分离
</li>
<li>在java类库中,集合类的基本接口是Collection接口
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Collection</span>&lt;E&gt;
{
    <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">add</span>(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>);
    Iterator&lt;E&gt; iterator();
}
</pre>

<ul>
<li>add方法用于向集合中添加元素,如果添加元素确实改变了集合,就返回true,否则返回false
</li>
<li>iterator方法用于返回一个实现了Iterator接口的对象
</li>
<li>Iterator接口包含3个方法
<ol>
<li>next. 通过反复调用next,可以逐个访问集合中的元素
</li>
<li>hasNext. 道道集合末尾,next将抛出NoSuchElementException,因此,需要调用next之前调用hasNext方法
</li>
<li>remove. remove方法将删除上次调用next方法时返回的元素.如果调用remove之前没有调用next将是不合法的.
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Iterator</span>&lt;E&gt;
{
    <span style="color: #228b22;">E</span> <span style="color: #a0522d;">next</span>();
    <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">hasNext</span>();
    <span style="color: #228b22;">void</span> <span style="color: #a0522d;">remove</span>();
}
</pre>

<ul>
<li>for each循环可以与任何实现了Iterable接口的对象一起工作,Collection接口扩展了Iterable接口,因此对于标准类库中的任何集合都可以使用for each循环
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Iterable</span>&lt;E&gt;
{
    Iterator&lt;E&gt; iterator();
}
</pre>

<ul>
<li>如果实现Collection接口,需要实现很多方法是一件很烦人的事,java类库提供了AbstractCollection,它将size和iterator抽象化了,但提供了其他方法.
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Collection&lt;E&gt;

Iterator&lt;E&gt; iterator             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#36845;&#20195;&#22120;</span>
<span style="color: #228b22;">int</span> size()                       <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#20803;&#32032;&#20010;&#25968;</span>
<span style="color: #228b22;">boolean</span> isEmpty()                <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21028;&#26029;&#38598;&#21512;&#26159;&#21542;&#20026;&#31354;</span>
<span style="color: #228b22;">boolean</span> contains(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>)     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21028;&#26029;&#38598;&#21512;&#20013;&#26159;&#21542;&#21253;&#21547;obj</span>
<span style="color: #228b22;">boolean</span> add(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">element</span>)      <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#19968;&#20010;&#20803;&#32032;&#28155;&#21152;&#21040;&#38598;&#21512;&#20013;</span>
<span style="color: #228b22;">boolean</span> remove(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">obj</span>)       <span style="color: #b22222;">//</span><span style="color: #b22222;">&#20174;&#38598;&#21512;&#20013;&#21024;&#38500;obj</span>
<span style="color: #228b22;">void</span> clear()                     <span style="color: #b22222;">//</span><span style="color: #b22222;">&#28165;&#31354;&#38598;&#21512;</span>
Object[] toArray()               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#38598;&#21512;&#30340;&#23545;&#35937;&#25968;&#32452;</span>
&lt;T&gt; T[] toArray(<span style="color: #228b22;">T</span>[] <span style="color: #a0522d;">arrayToFill</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#38598;&#21512;&#30340;&#23545;&#35937;&#25968;&#32452;</span>
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21028;&#26029;&#38598;&#21512;&#20013;&#26159;&#21542;&#21253;&#21547;other&#20013;&#30340;&#25152;&#26377;&#20803;&#32032;</span>
<span style="color: #228b22;">boolean</span> containsAll(Collection&lt;?&gt; other)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20174;&#38598;&#21512;&#20013;&#21024;&#38500;&#25152;&#26377;&#19982;other&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#19981;&#21516;&#30340;&#20803;&#32032;</span>
<span style="color: #228b22;">boolean</span> retainAll(Collection&lt;?&gt; other)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20174;&#38598;&#21512;&#20013;&#21024;&#38500;other&#38598;&#21512;&#20013;&#23384;&#22312;&#30340;&#25152;&#26377;&#20803;&#32032;</span>
<span style="color: #228b22;">boolean</span> removeAll(Collection&lt;?&gt; other)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;other&#38598;&#21512;&#20013;&#30340;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#38598;&#21512;&#20013;</span>
<span style="color: #228b22;">boolean</span> addAll(Collection&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; other)
</pre>

</div>

</div>

<div id="outline-container-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> 具体的集合</h3>
<div class="outline-text-3" id="text-7-2">


</div>

<div id="outline-container-7-2-1" class="outline-4">
<h4 id="sec-7-2-1"><span class="section-number-4">7.2.1</span> 链表</h4>
<div class="outline-text-4" id="text-7-2-1">

<ul>
<li>java中,所有链表实际上都是双向链接的
</li>
<li>有两种访问元素的协议:一种是用迭代器,另一种使用get和set方法随机地访问,后者不适用于链表
</li>
</ul>




<pre class="src src-java">List&lt;String&gt; staff = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">LinkedList</span>&lt;String&gt;(); <span style="color: #b22222;">//</span><span style="color: #b22222;">LinkedList&#23454;&#29616;&#20102;List</span>
staff.add(<span style="color: #8b2252;">"zoe"</span>);
staff.add(<span style="color: #8b2252;">"chao"</span>);
<span style="color: #228b22;">Iterator</span> <span style="color: #a0522d;">iter</span> = staff.iterator();
...
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.List&lt;E&gt;

ListIterator&lt;E&gt; listIterator()           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21015;&#34920;&#36845;&#20195;&#22120;</span>
ListIterator&lt;E&gt; listIterator(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">index</span>)  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21015;&#34920;&#36845;&#20195;&#22120;</span>
<span style="color: #228b22;">void</span> add(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>, <span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#32473;&#23450;&#20301;&#32622;&#28155;&#21152;&#20803;&#32032;</span>
E remove(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>)                          <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#25351;&#23450;&#20301;&#32622;&#20803;&#32032;</span>
E get(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>)                             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#21462;&#25351;&#23450;&#20301;&#32622;&#20803;&#32032;</span>
E set(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>)                             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#25351;&#23450;&#20301;&#32622;&#20803;&#32032;</span>
<span style="color: #228b22;">int</span> indexOf(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">element</span>)              <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25351;&#23450;&#20803;&#32032;&#31532;&#19968;&#27425;&#20986;&#29616;&#30340;&#20301;&#32622;</span>
<span style="color: #228b22;">int</span> lastIndexOf(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">element</span>)          <span style="color: #b22222;">//</span><span style="color: #b22222;">&#25351;&#23450;&#20803;&#32032;&#26368;&#21518;&#19968;&#27425;&#20986;&#29616;&#30340;&#20301;&#32622;</span>
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#38598;&#21512;&#20013;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#25351;&#23450;&#20301;&#32622;</span>
<span style="color: #228b22;">void</span> addAll(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>, Collection&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; elements)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.ListIterator&lt;E&gt;

<span style="color: #228b22;">void</span> add(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">newElement</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#24403;&#21069;&#20301;&#32622;&#28155;&#21152;&#19968;&#20010;&#20803;&#32032;                  </span>
<span style="color: #228b22;">void</span> set(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">newElement</span>) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#26032;&#20803;&#32032;&#21462;&#20195;next&#25110;previous&#19978;&#27425;&#35775;&#38382;&#30340;&#20803;&#32032;</span>
<span style="color: #228b22;">boolean</span> hasPrevious()  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26159;&#21542;&#36824;&#26377;&#21453;&#21521;&#36845;&#20195;&#21487;&#20379;&#35775;&#38382;&#30340;&#20803;&#32032;          </span>
E previous()           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21069;&#19968;&#20010;&#23545;&#35937;                              </span>
<span style="color: #228b22;">int</span> nextIndex()        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#19979;&#19968;&#27425;&#35843;&#29992;next&#26041;&#27861;&#26102;&#23558;&#36820;&#22238;&#30340;&#20803;&#32032;&#30340;&#32034;&#24341;  </span>
<span style="color: #228b22;">int</span> previousIndex()    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#19979;&#19968;&#27425;&#35843;&#29992;previous&#26041;&#27861;&#26102;&#23558;&#36820;&#22238;&#30340;&#20803;&#32032;&#30340;&#32034;&#24341;</span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.LinkedList&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#31354;&#38142;&#34920;                                  </span>
LinkedList()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#38142;&#34920;,&#24182;&#23558;&#38598;&#21512;&#20013;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#36825;&#20010;&#38142;&#34920;</span>
LinkedList(Collection&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; elements

<span style="color: #228b22;">void</span> addFirst(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#26576;&#20010;&#20803;&#32032;&#28155;&#21152;&#21040;&#21015;&#34920;&#30340;&#22836;&#37096;</span>
<span style="color: #228b22;">void</span> addLast(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)   <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#26576;&#20010;&#20803;&#32032;&#28155;&#21152;&#21040;&#21015;&#34920;&#30340;&#23614;&#37096;</span>
E getFirst()              <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21015;&#34920;&#22836;&#37096;</span>
E getLast()               <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#21015;&#34920;&#23614;&#37096;</span>
E removeFirst()           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#24182;&#36820;&#22238;&#21015;&#34920;&#22836;&#37096;</span>
E removeLast()            <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#24182;&#36820;&#22238;&#21015;&#34920;&#23614;&#37096;</span>
</pre>

</div>

</div>

<div id="outline-container-7-2-2" class="outline-4">
<h4 id="sec-7-2-2"><span class="section-number-4">7.2.2</span> 数组列表</h4>
<div class="outline-text-4" id="text-7-2-2">

<p>ArrayList类实现了List接口,ArrayList封装了一个动态再分配的对象数组
</p></div>

</div>

<div id="outline-container-7-2-3" class="outline-4">
<h4 id="sec-7-2-3"><span class="section-number-4">7.2.3</span> 散列集</h4>
<div class="outline-text-4" id="text-7-2-3">

<ul>
<li>散列表为每个对象计算一个整数,称散列码
</li>
<li>散列表用链表数组实现,每个列表被称为桶
</li>
<li>元素在表中的位置是 散列码%桶的总数
<ol>
<li>如果此位置没有其他元素,直接插入即可
</li>
<li>如果有其他元素,需要用新对象与桶中的所有对象进行比较,查看这个对象是否已经存在
</li>
</ol>

</li>
<li>如果散列表太满,就需要再散列,创建一个桶数更多的表,并将所有元素插入到这个新表中,装填因子决定何时对散列表进行再散列.如果装填因子是0.75,当表中超过75%的位置已经填入元素,就会进行在散列.
</li>
<li>java集合类库提供了HashSet类,它的实现给予散列表,可以用add添加元素,contains方法已被重新定义,用于快速产看是否拥有某个元素
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.HashSet&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#31354;&#25955;&#21015;&#38598;</span>
HashSet()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#25955;&#21015;&#38598;,&#24182;&#23558;&#38598;&#21512;&#20013;&#30340;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#36825;&#20010;&#25955;&#21015;&#38598;&#20013;</span>
HashSet(Collection&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; elements)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#31354;&#30340;&#25955;&#21015;&#38598;,&#25351;&#23450;&#26742;&#25968;</span>
HashSet(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#31354;&#30340;&#25955;&#21015;&#38598;,&#25351;&#23450;&#26742;&#25968;&#21644;&#35013;&#22635;&#22240;&#23376;</span>
HashSet(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>,<span style="color: #228b22;">float</span> <span style="color: #a0522d;">loadFactor</span>)
</pre>

</div>

</div>

<div id="outline-container-7-2-4" class="outline-4">
<h4 id="sec-7-2-4"><span class="section-number-4">7.2.4</span> 树集</h4>
<div class="outline-text-4" id="text-7-2-4">

<ul>
<li>TreeSet相对HashSet有所改进,树集是一个有序集合,可以以任意顺序将元素插入到集合中,对集合进行遍历时,每个值将自动按排序后的顺序呈现
</li>
<li>当前的实现使用的是红黑树
</li>
<li>每次将一个元素添加到树中时,都被放置在正确的排序位置上,将一个元素添加到树集中要比添加到散列集中慢
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.TreeSet&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#31354;&#26641;&#38598;</span>
TreeSet()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#26641;&#38598;,&#24182;&#23558;&#38598;&#21512;&#20013;&#30340;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#26641;&#38598;&#20013;</span>
TreeSet(Collection&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; elements)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#26641;&#38598;,&#24182;&#29992;&#25351;&#23450;&#30340;&#27604;&#36739;&#22120;&#23545;&#20854;&#20013;&#30340;&#20803;&#32032;&#25490;&#24207;</span>
TreeSet(Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; c)
<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#26641;&#38598;,&#23558;&#26377;&#24207;&#38598;&#20013;&#30340;&#25152;&#26377;&#20803;&#32032;&#28155;&#21152;&#21040;&#36825;&#20010;&#26641;&#38598;&#20013;,</span>
<span style="color: #b22222;">&#24182;&#20351;&#29992;&#19982;&#32473;&#23450;&#26377;&#24207;&#38598;&#30456;&#21516;&#30340;&#20803;&#32032;&#27604;&#36739;&#22120;*/</span>
TreeSet(SortedSet&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">E</span>&gt; elements)
</pre>

<ul>
<li id="sec-7-2-4-1">对象的比较<br/>
<ul>
<li>树集假定插入的元素实现了Comparable接口,接口定义了compareTo方法,a.compareTo(b),如果a与b相等,返回0,如果a位于b之前,返回负值,如果a位于b之后,返回正值
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Comparable</span>&lt;T&gt;
{
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">compareTo</span>(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">other</span>);
}
</pre>

<ul>
<li>如没有实现Comparable接口,可以将Comparator对象传递给TreeSet构造器,来告诉树集使用不同的比较方法
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">interface</span> <span style="color: #228b22;">Comparator</span>&lt;T&gt;
{
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">compare</span>(<span style="color: #228b22;">T</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">b</span>);
}
</pre>


<pre class="src src-java"><span style="color: #a020f0;">class</span> <span style="color: #228b22;">ItemComparator</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">Comparator</span>&lt;Item&gt;
{
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">compare</span>(<span style="color: #228b22;">Item</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">Item</span> <span style="color: #a0522d;">b</span>){...}
}

<span style="color: #228b22;">ItemComparator</span> <span style="color: #a0522d;">comp</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ItemComparator</span>();
SortedSet&lt;Item&gt; sortByDescription = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">TreeSet</span>&lt;Item&gt;(comp);
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.SortedSet&lt;E&gt;

Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; comparator() <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#29992;&#20110;&#23545;&#20803;&#32032;&#36827;&#34892;&#25490;&#24207;&#30340;&#27604;&#36739;&#22120; </span>
E frist()                          <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26377;&#24207;&#38598;&#20013;&#26368;&#23567;&#30340;&#20803;&#32032;         </span>
E last()                           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26377;&#24207;&#38598;&#20013;&#26368;&#22823;&#30340;&#20803;&#32032;         </span>
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-7-2-5" class="outline-4">
<h4 id="sec-7-2-5"><span class="section-number-4">7.2.5</span> 队列与双端队列</h4>
<div class="outline-text-4" id="text-7-2-5">

<ul>
<li>队列可以在尾部添加一个元素,在头部删除一个元素
</li>
<li>双端队列可以在头部和尾部同时添加或删除元素
</li>
<li>ArrayDeque和LinkedList类实现了Deque接口,并且提供了双端队列
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Queue&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#23614;&#37096;&#25554;&#20837;&#20803;&#32032;,&#22914;&#26524;&#38431;&#21015;&#28385;&#20102;,&#25243;&#20986;IllegalStateException</span>
<span style="color: #228b22;">boolean</span> add(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22312;&#23614;&#37096;&#25554;&#20837;&#20803;&#32032;,&#22914;&#26524;&#38431;&#21015;&#28385;&#20102;,&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> offer(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>) 

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#24182;&#36820;&#22238;&#22836;&#37096;&#20803;&#32032;,&#22914;&#26524;&#38431;&#21015;&#26159;&#31354;,&#25243;&#20986;NoSuchElementException</span>
E remove()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21024;&#38500;&#24182;&#36820;&#22238;&#22836;&#37096;&#20803;&#32032;,&#22914;&#26524;&#38431;&#21015;&#26159;&#31354;,&#36820;&#22238;false</span>
E poll()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#22836;&#37096;&#20803;&#32032;,&#20294;&#19981;&#21024;&#38500;,&#22914;&#26524;&#38431;&#21015;&#26159;&#31354;,&#25243;&#20986;NoSuchElementException</span>
E element()
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#22836;&#37096;&#20803;&#32032;,&#20294;&#19981;&#21024;&#38500;,&#22914;&#26524;&#38431;&#21015;&#26159;&#31354;,&#36820;&#22238;false</span>
E peek()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Deque&lt;E&gt;

<span style="color: #228b22;">void</span> addFirst(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)      
<span style="color: #228b22;">void</span> addLast(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)       
<span style="color: #228b22;">boolean</span> offerFirst(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>) 
<span style="color: #228b22;">boolean</span> offerlast(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)  
E removeFirst()               
E removeLast()                
E pollFirst()                 
E pollLast()                  
E getFirst()                  
E getLast()                   
E peekFirst()                 
E peekLast()                  
</pre>

</div>

</div>

<div id="outline-container-7-2-6" class="outline-4">
<h4 id="sec-7-2-6"><span class="section-number-4">7.2.6</span> 优先级队列</h4>
<div class="outline-text-4" id="text-7-2-6">

<ul>
<li>优先级队列中的元素可以按照任意的顺序插入,但无论何时调用remove方法,总会获得当前优先级队列中的最小元素
</li>
<li>优先级队列使用了堆
</li>
<li>与TreeSet一样,优先级队列既可以保存实现了Comparable接口的对象,也可以保存在构造器中提供比较器的对象
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#20248;&#20808;&#32423;&#38431;&#21015;</span>
PriorityQueue()
PriorityQueue(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#20248;&#20808;&#32423;&#38431;&#21015;,&#24182;&#29992;&#25351;&#23450;&#30340;&#27604;&#36739;&#22120;&#23545;&#20803;&#32032;&#36827;&#34892;&#25490;&#24207;</span>
PriorityQueue(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>,Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; c)
</pre>

</div>

</div>

<div id="outline-container-7-2-7" class="outline-4">
<h4 id="sec-7-2-7"><span class="section-number-4">7.2.7</span> 映射表</h4>
<div class="outline-text-4" id="text-7-2-7">

<ul>
<li>映射表用来存放键值对
</li>
<li>java类库为映射表提供了两个通用实现,这两个类都实现了Map接口
<ol>
<li>HashMap 对键进行散列
</li>
<li>TreeMap 用键的整体顺序对元素进行排序
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.Map&lt;K,V&gt;

V get(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>)                                    <span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#21462;&#38190;&#23545;&#24212;&#30340;&#20540;,&#27809;&#26377;&#21017;&#36820;&#22238;null     </span>
V put(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>)                           <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#38190;&#20540;&#23545;&#25554;&#20837;&#21040;&#26144;&#23556;&#34920;&#20013;            </span>
V putAll(Map&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>, ? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; entries) <span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#25351;&#23450;&#26144;&#23556;&#34920;&#20013;&#30340;&#26465;&#30446;&#25554;&#20837;&#21040;&#26144;&#23556;&#34920;&#20013;</span>
<span style="color: #228b22;">boolean</span> containsKey(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">key</span>)                 <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26144;&#23556;&#34920;&#20013;&#26159;&#21542;&#24050;&#32463;&#26377;&#25351;&#23450;&#38190;          </span>
<span style="color: #228b22;">boolean</span> containsValue(<span style="color: #228b22;">Object</span> <span style="color: #a0522d;">value</span>)             <span style="color: #b22222;">//</span><span style="color: #b22222;">&#26144;&#23556;&#34920;&#20013;&#26159;&#21542;&#24050;&#32463;&#26377;&#25351;&#23450;&#20540;          </span>
Set&lt;<span style="color: #008b8b;">Map</span>.Entry&lt;K,V&gt;&gt; entrySet()                  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26144;&#23556;&#34920;&#20013;&#30340;&#38190;&#20540;&#23545;              </span>
Set&lt;K&gt; keySet()                                 <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26144;&#23556;&#34920;&#20013;&#30340;&#38190;                  </span>
Collection&lt;V&gt; values()                          <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26144;&#23556;&#34920;&#20013;&#30340;&#20540;                  </span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">Map</span>.Entry&lt;K,V&gt;

K getKey()              <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#26465;&#30446;&#30340;&#38190; </span>
V getValue()            <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#36825;&#20010;&#26465;&#30446;&#30340;&#20540; </span>
V setValue(<span style="color: #228b22;">V</span> <span style="color: #a0522d;">nuewValue</span>) <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#26032;&#20540;,&#24182;&#36820;&#22238;&#26087;&#20540;</span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.HashMap&lt;K,V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#25955;&#21015;&#26144;&#23556;&#34920;</span>
HashMap()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#25955;&#21015;&#26144;&#23556;&#34920;,&#25351;&#23450;&#23481;&#37327;</span>
HashMap(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#25955;&#21015;&#26144;&#23556;&#34920;,&#25351;&#23450;&#23481;&#37327;,&#25351;&#23450;&#35013;&#22635;&#22240;&#23376;</span>
HashMap(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>,<span style="color: #228b22;">float</span> <span style="color: #a0522d;">loadFactor</span>)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.TreeMap&lt;K,V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#26641;&#26144;&#23556;&#34920;,&#25351;&#23450;&#27604;&#36739;&#22120;</span>
TreeMap(Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">K</span>&gt; c)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#26641;&#26144;&#23556;&#34920;,&#23558;&#25351;&#23450;&#26144;&#23556;&#34920;&#20013;&#30340;&#25152;&#26377;&#26465;&#30446;&#28155;&#21152;&#21040;&#26641;&#26144;&#23556;&#34920;&#20013;</span>
TreeMap(Map&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>,? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; entries)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#26641;&#26144;&#23556;&#34920;,&#23558;&#25351;&#23450;&#26377;&#24207;&#26144;&#23556;&#34920;&#20013;&#30340;&#25152;&#26377;&#26465;&#30446;&#28155;&#21152;&#21040;&#26641;&#26144;&#23556;&#34920;&#20013;,&#24182;&#20351;&#29992;&#20854;&#27604;&#36739;&#22120; </span>
TreeMap(SortedMap&lt;? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">K</span>,? <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">V</span>&gt; entries)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.SortedMap&lt;K,V&gt;

Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">K</span>&gt; comparator() <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#27604;&#36739;&#22120;          </span>
K firstKey()                       <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26144;&#23556;&#34920;&#20013;&#26368;&#23567;&#20803;&#32032;</span>
K lastKey()                        <span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#26144;&#23556;&#34920;&#20013;&#26368;&#22823;&#20803;&#32032;</span>
</pre>

</div>
</div>

</div>

<div id="outline-container-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> 集合框架</h3>
<div class="outline-text-3" id="text-7-3">


</div>

<div id="outline-container-7-3-1" class="outline-4">
<h4 id="sec-7-3-1"><span class="section-number-4">7.3.1</span> 集合框架的接口</h4>
<div class="outline-text-4" id="text-7-3-1">




<pre class="example">+ Iterable
  - Collection
    - List
    - Set
      - SorteSet
        - NavigableSet
    - Queue
      - Deque
+ Map
  - SortedMap
    - NavigableMap
+ Iterator
  - ListIterator
+ RandomAccess
</pre>

<ul>
<li>RandomAccess接口没有任何方法,但可以用来检测一个特定的集合是否支持高效的随机访问. ArrayList类和Vector类都实现了RandomAccess接口.
</li>
<li>ListIterator接口定义了add,previous等方法
</li>
<li>SortedSet和SortedMap接口暴露了用于排序的比较器对象
</li>
<li>NavigableSet和NavigableMap包含了几个用于在有序集和映射表中查找和遍历的方法.TreeSet和TreeMap类实现了这个接口.
</li>
</ul>


</div>

</div>

<div id="outline-container-7-3-2" class="outline-4">
<h4 id="sec-7-3-2"><span class="section-number-4">7.3.2</span> 集合框架的类</h4>
<div class="outline-text-4" id="text-7-3-2">




<pre class="example">+ AbstractCollection
  - AbstractList
    - AbstractSequentialList
      - LinkedList
    - ArrayList
  - AbstractSet
    - HashSet
    - TreeSet
  - AbstractQueue
    - PriorityQueue
  - ArrayDeque
+ AbstractMap
  - HashMap
  - TreeMap
</pre>

</div>

</div>

<div id="outline-container-7-3-3" class="outline-4">
<h4 id="sec-7-3-3"><span class="section-number-4">7.3.3</span> 视图</h4>
<div class="outline-text-4" id="text-7-3-3">

<p>调用某方法时,返回的不是集合类型的对象,而是某个实现了框架接口的类对象,称为视图
</p><ul>
<li id="sec-7-3-3-1">轻量级集包装器<br/>
Arrays类的静态方法asList可以将数组包装为List



<pre class="src src-java"><span style="color: #228b22;">Card</span>[] <span style="color: #a0522d;">card</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Card</span>[52];
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#30340;&#23545;&#35937;&#19981;&#26159;ArrayList,&#32780;&#26159;List</span>
List&lt;Card&gt; cardlist = Arrays.asList(cardDeck);
</pre>

<ul>
<li>任何改变数组大小的方法都会抛出UnsupportedOperationException异常
</li>
</ul>

</li>
</ul>
<ul>
<li id="sec-7-3-3-2">子范围<br/>
可以为集合建立子范围视图



<pre class="src src-java"><span style="color: #228b22;">List</span> <span style="color: #a0522d;">group2</span> = staff.subList(10,20);  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21462;[10,20)&#33539;&#22260;&#30340;&#20803;&#32032;</span>
</pre>

<ul>
<li>可以将任何操作应用于子范围,且能反映到原列表
</li>
<li>对于有序集和有序映射表,可以使用排序顺序建立子范围
</li>
</ul>




<pre class="src src-java">SortedSet&lt;E&gt; subSet(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">from</span>, <span style="color: #228b22;">E</span> <span style="color: #a0522d;">to</span>);
SortedSet&lt;E&gt; headSet(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">to</span>);
SortedSet&lt;E&gt; tailSet(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">from</span>);

SortedMap&lt;E&gt; subMap(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">from</span>, <span style="color: #228b22;">K</span> <span style="color: #a0522d;">to</span>);
SortedMap&lt;E&gt; headMap(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">to</span>);
SortedMap&lt;E&gt; tailMap(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">from</span>);
</pre>

</li>
</ul>
<ul>
<li id="sec-7-3-3-3">不可修改的视图<br/>
<ul>
<li>可以使用下面6种方法获得不可修改的视图
</li>
</ul>




<pre class="example">1. Collections.unmodifiableCollection
2. Collections.unmodifiableList
3. Collections.unmodifiableSet
4. Collections.unmodifiableSortedSet
5. Collections.unmodifiableMap
6. Collections.unmodifiableSortedMap
</pre>

<ul>
<li>Collections.unmodifiableList将返回一个实现List接口的类对象,所有更改器方法已经被重新定义为抛出一个unsupportedOperationException异常
</li>
</ul>

</li>
</ul>
<ul>
<li id="sec-7-3-3-4">同步视图<br/>
<ul>
<li>如果多个线程访问集合,必须确保集合不会被意外破坏
</li>
<li>类库设计者使用视图机制来确保常规集合的线程安全,而不是实现线程安全的集合类
</li>
<li>如Collections类的静态方法synchronizedMap可以将任何一个映射表转换成具有同步访问方法的Map
</li>
</ul>




<pre class="src src-java">Map&lt;String, Employee&gt; map = Collections.
           synchronizedMap(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">HashMap</span>&lt;String,Employee&gt;());
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-7-3-4" class="outline-4">
<h4 id="sec-7-3-4"><span class="section-number-4">7.3.4</span> 集合与数组之间的转换</h4>
<div class="outline-text-4" id="text-7-3-4">




<pre class="src src-java"><span style="color: #228b22;">String</span>[] <span style="color: #a0522d;">values</span> = ...;
HashSet&lt;String&gt; staff = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">HashSet</span>&lt;String&gt;(Arrays.asList(values));

<span style="color: #228b22;">Object</span>[] <span style="color: #a0522d;">values</span> = staff.toArray(); <span style="color: #b22222;">//</span><span style="color: #b22222;">&#21482;&#33021;&#20135;&#29983;&#19968;&#20010;&#23545;&#35937;&#25968;&#32452;,&#19981;&#33021;&#20351;&#29992;&#31867;&#22411;&#36716;&#25442;</span>
<span style="color: #228b22;">String</span>[] <span style="color: #a0522d;">values</span> = (<span style="color: #228b22;">String</span>[])staff.toArray(); <span style="color: #b22222;">//</span><span style="color: #b22222;">error!</span>

<span style="color: #228b22;">String</span>[] <span style="color: #a0522d;">values</span> = staff.toArray(<span style="color: #a020f0;">new</span> <span style="color: #228b22;">String</span>[0]); <span style="color: #b22222;">//</span><span style="color: #b22222;">&#35299;&#20915;&#30340;&#21150;&#27861;</span>
</pre>

</div>
</div>

</div>

<div id="outline-container-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> 算法</h3>
<div class="outline-text-3" id="text-7-4">


</div>

<div id="outline-container-7-4-1" class="outline-4">
<h4 id="sec-7-4-1"><span class="section-number-4">7.4.1</span> 排序和混排</h4>
<div class="outline-text-4" id="text-7-4-1">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Collections</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20351;&#29992;&#31283;&#23450;&#30340;&#25490;&#24207;&#31639;&#27861;&#23545;&#21015;&#34920;&#20013;&#30340;&#20803;&#32032;&#36827;&#34892;&#31283;&#23450;&#25490;&#24207;,&#26102;&#38388;&#22797;&#26434;&#24230;&#26159;O(nlogn)</span>
<span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt;&gt; <span style="color: #228b22;">void</span> sort(List&lt;T&gt; elements)
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">void</span> sort(List&lt;T&gt; elements, Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; c)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#38543;&#26426;&#22320;&#25171;&#20081;&#21015;&#34920;&#20013;&#30340;&#20803;&#32032;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> shuffle(List&lt;?&gt; elements)
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> shuffle(List&lt;?&gt; elements, <span style="color: #228b22;">Random</span> <span style="color: #a0522d;">r</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#27604;&#36739;&#22120;,&#23427;&#26159;Camparable&#25509;&#21475;&#30340;compareTo&#26041;&#27861;&#35268;&#23450;&#30340;&#39034;&#24207;&#30340;&#36870;&#24207;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; Comparator&lt;T&gt; reverseOrder()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#27604;&#36739;&#22120;,&#23427;&#26159;comp&#35268;&#23450;&#30340;&#39034;&#24207;&#30340;&#36870;&#24207;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; Comparator&lt;T&gt; reverseOrder(Comparator&lt;T&gt; comp)
</pre>

<ul>
<li>java中的排序,直接将所有元素转入一个数组,并使用一种归并排序的变体对数组进行排序,然后将排序后的序列复制会列表
</li>
<li>归并排序的一个主要优点是:稳定
</li>
<li>需要排序的列表必须是可修改的,不必是可以改变大小的
</li>
<li>如果列表支持set,则是可修改的;如果列表支持add和remove,则是可改变大小的
</li>
</ul>

</div>

</div>

<div id="outline-container-7-4-2" class="outline-4">
<h4 id="sec-7-4-2"><span class="section-number-4">7.4.2</span> 二分查找</h4>
<div class="outline-text-4" id="text-7-4-2">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Collections</span>

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#20174;&#26377;&#24207;&#21015;&#34920;&#20013;&#25628;&#32034;&#19968;&#20010;&#38190;,</span>
<span style="color: #b22222;">&#33509;&#20803;&#32032;&#25193;&#23637;&#20102;AbstractSequentialList&#31867;,&#23558;&#37319;&#29992;&#32447;&#24615;&#25628;&#32034;,&#21542;&#21017;&#37319;&#29992;&#20108;&#20998;&#26597;&#25214;</span>
<span style="color: #b22222;">&#22914;&#26524;&#21015;&#34920;&#20013;&#19981;&#23384;&#22312;&#36825;&#20010;&#38190;,&#23558;&#36820;&#22238;&#36127;&#20540;i,</span>
<span style="color: #b22222;">&#36825;&#31181;&#24773;&#20917;&#19979;,&#24212;&#35813;&#23558;&#36825;&#20010;&#38190;&#25554;&#20837;&#21040;&#21015;&#34920;&#32034;&#24341;-i-1&#20301;&#32622;&#19978;,&#20197;&#20445;&#25345;&#21015;&#34920;&#30340;&#26377;&#24207;&#24615;*/</span>
<span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt;&gt; <span style="color: #228b22;">int</span> binarySearch
                                             (
                                             List&lt;T&gt; elements, 
                                             <span style="color: #228b22;">T</span> <span style="color: #a0522d;">key</span>
                                             )
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">int</span> binarySearch(List&lt;T&gt; elements, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">key</span>, Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; c)
</pre>

<ul>
<li>集合必须是排好序的,否则将返回错误的答案
</li>
</ul>

</div>

</div>

<div id="outline-container-7-4-3" class="outline-4">
<h4 id="sec-7-4-3"><span class="section-number-4">7.4.3</span> 简单算法</h4>
<div class="outline-text-4" id="text-7-4-3">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #228b22;">Collections</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#38598;&#21512;&#20013;&#26368;&#23567;/&#22823;&#30340;&#20803;&#32032;</span>
<span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt;&gt; T min(Collection&lt;T&gt; elements)
<span style="color: #a020f0;">static</span> &lt;T <span style="color: #a020f0;">extends</span> <span style="color: #228b22;">Comparable</span>&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt;&gt; T max(Collection&lt;T&gt; elements)
<span style="color: #a020f0;">static</span> &lt;T&gt; T min(Collection&lt;T&gt; elements, Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; c)
<span style="color: #a020f0;">static</span> &lt;T&gt; T max(Collection&lt;T&gt; elements, Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; c)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#20803;&#21015;&#34920;&#20013;&#25152;&#26377;&#20803;&#32032;&#22797;&#21046;&#21040;&#30446;&#26631;&#21015;&#34920;&#30340;&#30456;&#24212;&#20301;&#32622;&#19978;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">void</span> copy(List&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; to, List&lt;T&gt; from)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#21015;&#34920;&#20013;&#25152;&#26377;&#20301;&#32622;&#35774;&#32622;&#20026;&#30456;&#21516;&#30340;&#20540;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">void</span> fill(List&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; l, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">value</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#25152;&#26377;&#30340;&#20540;&#28155;&#21152;&#21040;&#38598;&#21512;&#20013;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">boolean</span> addAll(Collection&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">T</span>&gt; c, <span style="color: #228b22;">T</span>... <span style="color: #a0522d;">values</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;newValue&#26367;&#25442;&#25152;&#26377;&#20540;&#20026;oldValue&#30340;&#20803;&#32032;</span>
<span style="color: #a020f0;">static</span> &lt;T&gt; <span style="color: #228b22;">boolean</span> replaceAll(List&lt;T&gt; l, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">oldValue</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">newValue</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;l&#20013;&#31532;&#19968;&#20010;&#25110;&#26368;&#21518;&#19968;&#20010;&#31561;&#20110;s&#23376;&#21015;&#34920;&#30340;&#32034;&#24341;,&#33509;&#19981;&#23384;&#22312;&#36820;&#22238;-1</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> indexOfSubList(List&lt;?&gt; l, List&lt;?&gt; s)
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> lastIndexOfSubList(List&lt;?&gt; l, List&lt;?&gt; s)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20132;&#25442;&#32473;&#23450;&#20559;&#31227;&#37327;&#30340;&#20004;&#20010;&#20803;&#32032;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> swap(List&lt;?&gt; l, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">j</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36870;&#32622;&#21015;&#34920;&#20013;&#20803;&#32032;&#30340;&#39034;&#24207;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> reverse(List&lt;?&gt; l)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26059;&#36716;&#21015;&#34920;&#20013;&#30340;&#20803;&#32032;,&#23558;i&#31227;&#21160;&#21040;(i+d)%l.size()</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> rotate(List&lt;?&gt; l, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;c&#20013;&#19982;&#23545;&#35937;o&#30456;&#21516;&#30340;&#20803;&#32032;&#20010;&#25968;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> frequency(Collection&lt;?&gt; c, <span style="color: #228b22;">Object</span> <span style="color: #a0522d;">o</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#20004;&#20010;&#38598;&#21512;&#27809;&#26377;&#20849;&#21516;&#20803;&#32032;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> disjoint(Collection&lt;?&gt; c2, Collection&lt;?&gt; c2)
</pre>

</div>
</div>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 多线程</h2>
<div class="outline-text-2" id="text-8">


</div>

<div id="outline-container-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> 线程概念</h3>
<div class="outline-text-3" id="text-8-1">

<ul>
<li>多进程与多线程的区别
<ol>
<li>每个进程拥有自己的一套变量,而线程则共享数据
</li>
<li>线程之间通信比进程之间通信更有效,更容易
</li>
<li>线程比进程更"轻量级",创建,撤销一个线程比进程的开销小的多
</li>
</ol>

</li>
<li>在一个单独的线程中执行一个任务的步骤
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#20219;&#21153;&#20195;&#30721;&#31227;&#21040;&#23454;&#29616;&#20102;Runnable&#25509;&#21475;&#30340;&#31867;&#30340;run&#26041;&#27861;&#20013;</span>
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">MyRunnable</span> <span style="color: #a020f0;">implements</span> <span style="color: #228b22;">Runnable</span>
{
    <span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">run</span>(){
        ...
    }
}
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21019;&#24314;&#19968;&#20010;&#31867;&#23545;&#35937;</span>
<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">r</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">MyRunnable</span>();
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#30001;Runnable&#21019;&#24314;&#19968;&#20010;Thread&#23545;&#35937;</span>
<span style="color: #228b22;">Thread</span> <span style="color: #a0522d;">t</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Thread</span>(r);
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21551;&#21160;&#32447;&#31243;</span>
t.start();
</pre>

<ul>
<li>不要调用Thread类或Runnable对象的run方法,直接调用run方法只会执行同一个线程中的任务,而不会启动新线程,应该调用Thread.start方法
</li>
</ul>

</div>

</div>

<div id="outline-container-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> 中断线程</h3>
<div class="outline-text-3" id="text-8-2">

<ul>
<li>线程终止的情况
<ol>
<li>线程的run方法执行方法体中最后一条语句后返回
</li>
<li>出现了在方法中没有捕获的异常
</li>
</ol>

</li>
<li>stop方法和suspend方法已被弃用
</li>
</ul>


</div>

<div id="outline-container-8-2-1" class="outline-4">
<h4 id="sec-8-2-1"><span class="section-number-4">8.2.1</span> interrupt方法</h4>
<div class="outline-text-4" id="text-8-2-1">

<ul>
<li>interrupt方法可以用来请求终止线程
</li>
<li>对一个线程调用interrupt方法时,线程的 <i>中断状态</i> 将被置位
</li>
<li>可以通过Thread.currentThread.isInterruppted方法判断中断状态是否被置位
</li>
<li>线程被阻塞时无法检测中断状态,将会产生InterruptedException异常
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#21521;&#32447;&#31243;&#21457;&#36865;&#20013;&#26029;&#35831;&#27714;,&#32447;&#31243;&#30340;&#20013;&#26029;&#29366;&#24577;&#32622;&#20301;,&#22914;&#26524;&#32447;&#31243;&#34987;&#38459;&#22622;,&#23558;&#25243;&#20986;InterruptedException&#24322;&#24120;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">interrupt</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#27979;&#35797;&#24403;&#21069;&#32447;&#31243;&#26159;&#21542;&#34987;&#20013;&#26029;,&#24182;&#22797;&#20301;&#20013;&#26029;&#29366;&#24577;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">boolean</span> interrupted()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#27979;&#35797;&#24403;&#21069;&#32447;&#31243;&#26159;&#21542;&#34987;&#20013;&#26029;,&#19981;&#20250;&#22797;&#20301;&#20013;&#26029;&#29366;&#24577;</span>
<span style="color: #228b22;">boolean</span> isInterrupted()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#20195;&#34920;&#24403;&#21069;&#25191;&#34892;&#32447;&#31243;&#30340;Thread&#23545;&#35937;</span>
<span style="color: #a020f0;">static</span> Thread currentThread()
</pre>

</div>
</div>

</div>

<div id="outline-container-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> 线程状态</h3>
<div class="outline-text-3" id="text-8-3">

<ul>
<li>线程有6种状态
<ol>
<li>new 当用new操作符创建一个新线程时,状态是new
</li>
<li>runnable 当调用start方法,状态是runnable(注意,一个可runnable的线程可能正在运行,也可能没有运行,是否正在运行取决于调度器的调度)
</li>
<li>blocked 当线程试图获得一个正被其他线程持有的对象锁,状态是blocked
</li>
<li>waiting 当线程等待另一个线程通知调度器一个条件时,状态是waiting(如wait和join方法)
</li>
<li>timed waiting 当线程调用了有超时参数的方法时,状态是timed waiting(如Thread.sleep方法)
</li>
<li>terminated 当线程正常退出自然死亡时,或者因为一个没有捕获的异常意外死亡时,状态是terminated
</li>
</ol>

</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#25351;&#23450;&#30340;&#32447;&#31243;&#27515;&#20129;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">join</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#25351;&#23450;&#30340;&#32447;&#31243;&#27515;&#20129;&#25110;&#32773;&#32463;&#36807;&#25351;&#23450;&#30340;&#27627;&#31186;&#25968;</span>
<span style="color: #228b22;">void</span> join(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">millis</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#24471;&#21040;&#36825;&#19968;&#32447;&#31243;&#30340;&#29366;&#24577;</span>
<span style="color: #008b8b;">Thread</span>.State getState()
</pre>

</div>

</div>

<div id="outline-container-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> 线程属性</h3>
<div class="outline-text-3" id="text-8-4">


</div>

<div id="outline-container-8-4-1" class="outline-4">
<h4 id="sec-8-4-1"><span class="section-number-4">8.4.1</span> 线程优先级</h4>
<div class="outline-text-4" id="text-8-4-1">

<ul>
<li>默认情况下,一个线程继承其父线程的优先级
</li>
<li>可以用setPriority设置线程优先级
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35774;&#32622;&#32447;&#31243;&#30340;&#20248;&#20808;&#32423;,&#20248;&#20808;&#32423;&#24517;&#39035;&#22312;Thread.MIN_PRIORITY&#19982;Thread.MAX_PRIORITY&#20043;&#38388;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setPriority</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">newPriority</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#32447;&#31243;&#30340;&#26368;&#23567;(1),&#40664;&#35748;(5),&#26368;&#39640;&#20248;&#20808;&#32423;(10)</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> MIN_PRIORITY
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> MAX_PRIORITY
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> NORM_PRIORITY

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23548;&#33268;&#24403;&#21069;&#25191;&#34892;&#32447;&#31243;&#35753;&#27493;&#25191;&#34892;&#26435;</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">void</span> yield()
</pre>

</div>

</div>

<div id="outline-container-8-4-2" class="outline-4">
<h4 id="sec-8-4-2"><span class="section-number-4">8.4.2</span> 守护线程</h4>
<div class="outline-text-4" id="text-8-4-2">

<ul>
<li>守护线程的用途是为其他线程提供服务
</li>
<li>当只剩下守护线程时,虚拟机就退出了
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Thread

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26631;&#24535;&#35813;&#32447;&#31243;&#20026;&#23432;&#25252;&#32447;&#31243;&#25110;&#29992;&#25143;&#32447;&#31243;,&#24517;&#39035;&#22312;&#32447;&#31243;&#21551;&#21160;&#20043;&#21069;&#35843;&#29992;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setDaemon</span>(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">isDaemon</span>)
</pre>

</div>
</div>

</div>

<div id="outline-container-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> 同步</h3>
<div class="outline-text-3" id="text-8-5">


</div>

<div id="outline-container-8-5-1" class="outline-4">
<h4 id="sec-8-5-1"><span class="section-number-4">8.5.1</span> 锁对象</h4>
<div class="outline-text-4" id="text-8-5-1">

<ul>
<li>用ReentrantLock保护代码块的基本结构如下
</li>
</ul>




<pre class="src src-java">myLock.lock();
<span style="color: #a020f0;">try</span>{
    ...
}
<span style="color: #a020f0;">finally</span>{
    myLock.unlock();
}
</pre>

<ul>
<li>这一结构确保任何时刻只有一个线程进入临界区
</li>
<li>一旦一个线程封锁了锁对象,当其他线程调用lock时,将被阻塞,直到第一个线程释放锁对象
</li>
<li>锁是可重入的,一个线程可以重复获得已经持有的锁,锁会保持一个计数器来跟踪lock方法的嵌套调用,当计数器变为0时线程释放锁.
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Lock

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#21462;&#38145;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">lock</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#37322;&#25918;&#38145;</span>
<span style="color: #228b22;">void</span> unlock()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.<span style="color: #228b22;">ReentrantLock</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#24314;&#19968;&#20010;&#21487;&#37325;&#20837;&#38145;</span>
<span style="color: #0000ff;">ReentrantLock</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#24314;&#19968;&#20010;&#24102;&#26377;&#20844;&#24179;&#31574;&#30053;&#30340;&#21487;&#37325;&#20837;&#38145;,&#19968;&#20010;&#20844;&#24179;&#38145;&#20559;&#29233;&#31561;&#24453;&#26102;&#38388;&#26368;&#38271;&#30340;&#32447;&#31243;</span>
ReentrantLock(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">fair</span>)
</pre>

</div>

</div>

<div id="outline-container-8-5-2" class="outline-4">
<h4 id="sec-8-5-2"><span class="section-number-4">8.5.2</span> 条件对象</h4>
<div class="outline-text-4" id="text-8-5-2">

<ul>
<li>可以用newCondition方法获得一个条件对象
</li>
<li>条件对象调用await方法时,当前线程被阻塞,并放弃锁,直到另一个线程调用同一条件对象的signalAll方法
</li>
<li>signalAll方法调用会重新激活因为这一条件而等待的所有线程,它们再次成为runnable状态
</li>
<li>它们中的某个将获得该锁并从被阻塞的地方继续执行
</li>
<li>另一个方法signal,则会随机解除等待集合中的某个线程的阻塞状态
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Lock

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#19982;&#35813;&#38145;&#30456;&#20851;&#30340;&#26465;&#20214;&#23545;&#35937;</span>
<span style="color: #228b22;">Condition</span> <span style="color: #0000ff;">newCondition</span>()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Condition

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23558;&#32447;&#31243;&#25918;&#21040;&#26465;&#20214;&#30340;&#31561;&#24453;&#38598;&#21512;&#20013;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">await</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35299;&#38500;&#35813;&#26465;&#20214;&#31561;&#24453;&#38598;&#21512;&#20013;&#30340;&#25152;&#26377;&#32447;&#31243;&#30340;&#38459;&#22622;&#29366;&#24577;</span>
<span style="color: #228b22;">void</span> signalAll()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20174;&#35813;&#26465;&#20214;&#30340;&#31561;&#24453;&#38598;&#20013;&#38543;&#26426;&#22320;&#36873;&#25321;&#19968;&#20010;&#32447;&#31243;,&#35299;&#38500;&#20854;&#38459;&#22622;&#29366;&#24577;</span>
<span style="color: #228b22;">void</span> signal()
</pre>

</div>

</div>

<div id="outline-container-8-5-3" class="outline-4">
<h4 id="sec-8-5-3"><span class="section-number-4">8.5.3</span> synchronized关键字</h4>
<div class="outline-text-4" id="text-8-5-3">

<ul>
<li>每个对象都有一个内部锁
</li>
<li>如果一个方法用synchronized关键字声明,将使用对象的内部锁
</li>
</ul>




<pre class="src src-java"><span style="color: #a020f0;">public</span> <span style="color: #a020f0;">synchronized</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">method</span>(){
    ...
}
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#20215;&#20110;</span>
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">method</span>(){
    <span style="color: #a020f0;">this</span>.intrinsicLock.lock();
    <span style="color: #a020f0;">try</span>{
        ...
    }
    fanally{
        <span style="color: #a020f0;">this</span>.intrinsicLock.unlock();
    }
}
</pre>

<ul>
<li>内部对象锁只提供一个条件对象,wait方法添加一个线程到等待集合中,notifyAll/notify方法解除等待线程的阻塞状态
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">lang</span>.Object

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#35299;&#38500;&#37027;&#20123;&#22312;&#35813;&#23545;&#35937;&#19978;&#35843;&#29992;wait&#26041;&#27861;&#30340;&#32447;&#31243;&#30340;&#38459;&#22622;&#29366;&#24577;</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">notifyAll</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#38543;&#26426;&#36873;&#25321;&#19968;&#20010;&#22312;&#35813;&#23545;&#35937;&#19978;&#35843;&#29992;wait&#26041;&#27861;&#30340;&#32447;&#31243;,&#35299;&#38500;&#20854;&#38459;&#22622;&#29366;&#24577;</span>
<span style="color: #228b22;">void</span> notify()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23548;&#33268;&#32447;&#31243;&#36827;&#20837;&#31561;&#24453;&#29366;&#24577;</span>
<span style="color: #228b22;">void</span> wait()
<span style="color: #228b22;">void</span> wait(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">millis</span>)
<span style="color: #228b22;">void</span> wait(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">millis</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">nanos</span>)
</pre>

</div>

</div>

<div id="outline-container-8-5-4" class="outline-4">
<h4 id="sec-8-5-4"><span class="section-number-4">8.5.4</span> 同步阻塞</h4>
<div class="outline-text-4" id="text-8-5-4">




<pre class="src src-java"><span style="color: #a020f0;">synchronized</span>(obj){
    ...
}
</pre>

</div>

</div>

<div id="outline-container-8-5-5" class="outline-4">
<h4 id="sec-8-5-5"><span class="section-number-4">8.5.5</span> valatile域</h4>
<div class="outline-text-4" id="text-8-5-5">

<ul>
<li>使用现代处理器,多个线程对实例域的访问可能会导致出错
</li>
<li>但有时仅仅为了读写一个或两个实例域就使用同步,显得开销过大了
</li>
<li>volatile关键字为实例域的同步访问提供了一种免锁机制
</li>
<li>如果声明一个域为volatile,那么编译器和虚拟机就知道该域是可能被另一个线程并发更新的
</li>
</ul>

</div>

</div>

<div id="outline-container-8-5-6" class="outline-4">
<h4 id="sec-8-5-6"><span class="section-number-4">8.5.6</span> 锁测试与超时</h4>
<div class="outline-text-4" id="text-8-5-6">

<p>tryLock方法试图申请一个锁,在成功获得锁后返回true,否则,立即返回false.
</p>


<pre class="src src-java"><span style="color: #a020f0;">if</span>(myLock.tryLock()){
    <span style="color: #a020f0;">try</span>{
        ...
    }
    <span style="color: #a020f0;">finally</span>{
        myLock.unlock();
    }
}
<span style="color: #a020f0;">else</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">do something else</span>
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.Lock

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23581;&#35797;&#33719;&#24471;&#38145;&#32780;&#27809;&#26377;&#21457;&#29983;&#38459;&#22622;,&#22914;&#26524;&#25104;&#21151;&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> <span style="color: #0000ff;">tryLock</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23581;&#35797;&#33719;&#24471;&#38145;,&#38459;&#22622;&#26102;&#38388;&#19981;&#20250;&#36229;&#36807;&#32473;&#23450;&#30340;&#20540;,&#22914;&#26524;&#25104;&#21151;&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> tryLock(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUint</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>

</div>

<div id="outline-container-8-5-7" class="outline-4">
<h4 id="sec-8-5-7"><span class="section-number-4">8.5.7</span> 读写锁</h4>
<div class="outline-text-4" id="text-8-5-7">

<ul>
<li>有时,可能会有很多线程读对象,而很少线程写对象
</li>
<li>读写锁允许对读者线程共享访问,而写者线程依然互斥访问.步骤
</li>
</ul>




<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">1. &#26500;&#36896;&#19968;&#20010;ReentrantReadWriteLock&#23545;&#35937;</span>
<span style="color: #a020f0;">private</span> <span style="color: #228b22;">ReentrantReadWriteLock</span> <span style="color: #a0522d;">rwl</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ReentrantReadWriteLock</span>();
<span style="color: #b22222;">//</span><span style="color: #b22222;">2.&#25277;&#21462;&#35835;&#38145;&#21644;&#20889;&#38145;</span>
<span style="color: #a020f0;">private</span> <span style="color: #228b22;">Lock</span> <span style="color: #a0522d;">readLock</span> = rwl.readLock();
<span style="color: #a020f0;">private</span> <span style="color: #228b22;">Lock</span> <span style="color: #a0522d;">writeLock</span> = rwl.writeLock();
<span style="color: #b22222;">//</span><span style="color: #b22222;">3.&#23545;&#25152;&#26377;&#35775;&#38382;&#32773;&#21152;&#35835;&#38145;</span>
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">double</span> <span style="color: #0000ff;">get</span>()
{
    readLock.lock();
    <span style="color: #a020f0;">try</span>{...}
    <span style="color: #a020f0;">finally</span>{readLock.unlock();}
}
<span style="color: #b22222;">//</span><span style="color: #b22222;">4.&#23545;&#25152;&#26377;&#20462;&#25913;&#32773;&#21152;&#20889;&#38145;</span>
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> <span style="color: #0000ff;">set</span>(...){
    writeLock.lock();
    <span style="color: #a020f0;">try</span>{...}
    <span style="color: #a020f0;">finally</span>{writeLock.unlock();}    
}
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #008b8b;">locks</span>.ReentrantReadWriteLock

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#24471;&#21040;&#19968;&#20010;&#21487;&#20197;&#34987;&#22810;&#20010;&#35835;&#25805;&#20316;&#20849;&#29992;&#30340;&#35835;&#38145;</span>
<span style="color: #228b22;">Lock</span> <span style="color: #0000ff;">readLock</span>()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#24471;&#21040;&#19968;&#20010;&#20889;&#38145;,&#25490;&#26021;&#25152;&#26377;&#20854;&#20182;&#30340;&#35835;&#25805;&#20316;&#21644;&#20889;&#25805;&#20316;</span>
Lock writeLock()
</pre>

</div>
</div>

</div>

<div id="outline-container-8-6" class="outline-3">
<h3 id="sec-8-6"><span class="section-number-3">8.6</span> 阻塞队列</h3>
<div class="outline-text-3" id="text-8-6">

<ul>
<li>对于许多线程问题,可以通过使用一个或多个队列以优雅且安全的方式将其形式化
</li>
<li>生产者线程向队列插入元素
</li>
<li>消费者线程则取出元素
</li>
<li>使用队列可以安全地从一个线程向另一个线程传递数据
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.BlockingQueue&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#28155;&#21152;&#20803;&#32032;,&#24517;&#35201;&#26102;&#38459;&#22622;</span>
<span style="color: #228b22;">void</span> put(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31227;&#38500;&#24182;&#36820;&#22238;&#22836;&#20803;&#32032;,&#24517;&#35201;&#26102;&#38459;&#22622;</span>
E take()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#28155;&#21152;&#20803;&#32032;,&#25104;&#21151;&#21017;&#36820;&#22238;true,&#24517;&#35201;&#26102;&#38459;&#22622;,&#30452;&#33267;&#20803;&#32032;&#24050;&#32463;&#34987;&#28155;&#21152;&#25110;&#36229;&#26102;</span>
<span style="color: #228b22;">boolean</span> offer(<span style="color: #228b22;">E</span> <span style="color: #a0522d;">element</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31227;&#38500;&#24182;&#36820;&#22238;&#22836;&#20803;&#32032;,&#24517;&#35201;&#26102;&#38459;&#22622;,&#30452;&#33267;&#20803;&#32032;&#21487;&#29992;&#25110;&#36229;&#26102;,&#22833;&#36133;&#26159;&#36820;&#22238;null</span>
E poll(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>

</div>

<div id="outline-container-8-7" class="outline-3">
<h3 id="sec-8-7"><span class="section-number-3">8.7</span> 线程安全的集合</h3>
<div class="outline-text-3" id="text-8-7">


</div>

<div id="outline-container-8-7-1" class="outline-4">
<h4 id="sec-8-7-1"><span class="section-number-4">8.7.1</span> 映射,集合和队列</h4>
<div class="outline-text-4" id="text-8-7-1">

<p>java.util.concurrent包提供了映射,有序集合和队列的高效实现
</p><ul>
<li>映射表
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ConcurrentHashMap&lt;K,V&gt;

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#21487;&#20197;&#34987;&#22810;&#32447;&#31243;&#23433;&#20840;&#35775;&#38382;&#30340;&#25955;&#21015;&#26144;&#23556;&#34920;</span>
<span style="color: #b22222;">&#21442;&#25968; initialCapacity &#21021;&#22987;&#23481;&#37327; </span>
<span style="color: #b22222;">&#21442;&#25968; loadFactor &#36127;&#36733;&#22240;&#23376; </span>
<span style="color: #b22222;">&#21442;&#25968; concurrencyLevel&#24182;&#21457;&#20889;&#32447;&#31243;&#30340;&#20272;&#35745;&#25968;&#30446;*/</span>
ConcurrentHashMap&lt;K,V&gt;()
ConcurrentHashMap&lt;K,V&gt;(<span style="color: #228b22;">int</span> initialCapacity)
ConcurrentHashMap&lt;K,V&gt;(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">initialCapacity</span>, 
                       <span style="color: #228b22;">float</span> <span style="color: #a0522d;">loadFactor</span>, 
                       <span style="color: #228b22;">int</span> <span style="color: #a0522d;">concurrencyLevel</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#26144;&#23556;&#34920;&#20013;&#27809;&#26377;&#25351;&#23450;&#30340;key,&#21017;&#25554;&#20837;key&#21644;value,&#24182;&#36820;&#22238;null.&#21542;&#21017;&#36820;&#22238;&#19982;key&#20851;&#32852;&#30340;value</span>
V putIfAbsent(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#26144;&#23556;&#34920;&#20013;&#26377;&#25351;&#23450;&#30340;key,&#21024;&#38500;key&#21644;value&#24182;&#36820;&#22238;true,&#21542;&#21017;&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> remove(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#25351;&#23450;&#30340;key&#19982;oldValue&#21521;&#20851;&#32852;,&#29992;&#23427;&#19982;newValue&#20851;&#32852;,&#21542;&#21017;&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> replace(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">oldValue</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">newValue</span>)
</pre>

<ul>
<li>有序映射表
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ConcurrentSkipListMap&lt;K,V&gt;

<span style="color: #b22222;">/*</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#21487;&#20197;&#34987;&#22810;&#32447;&#31243;&#23433;&#20840;&#35775;&#38382;&#30340;&#26377;&#24207;&#26144;&#23556;&#34920;</span>
<span style="color: #b22222;">&#31532;&#19968;&#20010;&#26500;&#36896;&#22120;&#35201;&#27714;&#38190;&#23454;&#29616;Comparable&#25509;&#21475;*/</span>
ConcurrentSkipListMap&lt;K,V&gt;()
ConcurrentHashMap&lt;K,V&gt;(Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">K</span>&gt; comp)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#26144;&#23556;&#34920;&#20013;&#27809;&#26377;&#25351;&#23450;&#30340;key,&#21017;&#25554;&#20837;key&#21644;value,&#24182;&#36820;&#22238;null.&#21542;&#21017;&#36820;&#22238;&#19982;key&#20851;&#32852;&#30340;value</span>
V putIfAbsent(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#26144;&#23556;&#34920;&#20013;&#26377;&#25351;&#23450;&#30340;key,&#21024;&#38500;key&#21644;value&#24182;&#36820;&#22238;true,&#21542;&#21017;&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> remove(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">value</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#25351;&#23450;&#30340;key&#19982;oldValue&#21521;&#20851;&#32852;,&#29992;&#23427;&#19982;newValue&#20851;&#32852;,&#21542;&#21017;&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> replace(<span style="color: #228b22;">K</span> <span style="color: #a0522d;">key</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">oldValue</span>, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">newValue</span>)
</pre>

<ul>
<li>队列(非阻塞)
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ConcurrentLinkedQueue&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#21487;&#20197;&#34987;&#22810;&#32447;&#31243;&#23433;&#20840;&#35775;&#38382;&#30340;&#26080;&#36793;&#30028;&#38750;&#38459;&#22622;&#38431;&#21015;</span>
ConcurrentLinkedQueue&lt;E&gt;()
</pre>

<ul>
<li>有序集合
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ConcurrentLinkedQueue&lt;E&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#21487;&#20197;&#34987;&#22810;&#32447;&#31243;&#23433;&#20840;&#35775;&#38382;&#30340;&#26377;&#24207;&#38598;&#21512;,&#31532;&#19968;&#20010;&#26500;&#36896;&#22120;&#35201;&#27714;&#20803;&#32032;&#23454;&#29616;Comparable&#25509;&#21475;</span>
ConcurrentSkipListSet&lt;E&gt;()
ConcurrentSkipListSet&lt;E&gt;(Comparator&lt;? <span style="color: #a020f0;">super</span> <span style="color: #228b22;">E</span>&gt; comp)
</pre>

</div>

</div>

<div id="outline-container-8-7-2" class="outline-4">
<h4 id="sec-8-7-2"><span class="section-number-4">8.7.2</span> 写数组的拷贝</h4>
<div class="outline-text-4" id="text-8-7-2">

<ul>
<li>CopyOnWriteArrayList和CopyOnWriteArraySet是线程安全的集合
</li>
<li>所有的修改线程对底层数组进行复制
</li>
<li>当构建一个迭代器时,它包含一个对当前数组的引用,即使数组后来被修改了,迭代器仍然引用旧数组
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-8-8" class="outline-3">
<h3 id="sec-8-8"><span class="section-number-3">8.8</span> Callable与Future</h3>
<div class="outline-text-3" id="text-8-8">

<ul>
<li>Runnable封装一个异步运行的任务
</li>
<li>Callable接口与Runnable类似,但是有返回值
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Callable&lt;V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36816;&#34892;&#19968;&#20010;&#23558;&#20135;&#29983;&#32467;&#26524;&#30340;&#20219;&#21153;</span>
V call()
</pre>

<ul>
<li>Future保存异步计算的结果
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Future&lt;V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#33719;&#21462;&#32467;&#26524;,&#33509;&#27809;&#26377;&#32467;&#26524;&#21487;&#29992;,&#21017;&#38459;&#22622;&#30452;&#21040;&#24471;&#21040;&#32467;&#26524;&#25110;&#36229;&#26102;</span>
V get()
V get(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23581;&#35797;&#21462;&#28040;&#20219;&#21153;&#30340;&#36816;&#34892;,&#22914;&#26524;&#20219;&#21153;&#24050;&#32463;&#24320;&#22987;&#19988;mayInterrupt&#20026;true,&#20219;&#21153;&#20250;&#34987;&#20013;&#26029;.</span>
<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#25104;&#21151;&#25191;&#34892;&#20102;&#21462;&#28040;&#25805;&#20316;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> cancel(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">mayInterrupt</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#20219;&#21153;&#22312;&#23436;&#25104;&#21069;&#34987;&#21462;&#28040;&#20102;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> isCancelled()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#22914;&#26524;&#20219;&#21153;&#32467;&#26463;,&#26080;&#35770;&#26159;&#21542;&#27491;&#24120;&#32467;&#26463;,&#36820;&#22238;true</span>
<span style="color: #228b22;">boolean</span> isDone
</pre>

<ul>
<li>FutureTask包装器将Callable转换成Future和Runnable
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.FutureTask&lt;V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#26082;&#26159;Future&lt;V&gt;&#21448;&#26159;Runnable&#30340;&#23545;&#35937;</span>
FutureTask(Callable&lt;V&gt; task)
FutureTask(Callable&lt;V&gt; task, <span style="color: #228b22;">V</span> <span style="color: #a0522d;">result</span>)
</pre>


<pre class="src src-java"><span style="color: #b22222;">//</span><span style="color: #b22222;">&#24212;&#29992;&#20030;&#20363;</span>
Callable&lt;Integer&gt; myComputation = ...;
FutureTask&lt;Integer&gt; task = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FutureTask</span>&lt;Integer&gt;(myComputation);
<span style="color: #228b22;">Thread</span> <span style="color: #a0522d;">t</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Thread</span>(task);  <span style="color: #b22222;">//</span><span style="color: #b22222;">it's Runnable</span>
t.start();
...
Integer result = task.get();  <span style="color: #b22222;">//</span><span style="color: #b22222;">it's Future</span>
</pre>

</div>

</div>

<div id="outline-container-8-9" class="outline-3">
<h3 id="sec-8-9"><span class="section-number-3">8.9</span> 执行器</h3>
<div class="outline-text-3" id="text-8-9">


</div>

<div id="outline-container-8-9-1" class="outline-4">
<h4 id="sec-8-9-1"><span class="section-number-4">8.9.1</span> 线程池</h4>
<div class="outline-text-4" id="text-8-9-1">

<p>使用线程池的步骤
</p><ol>
<li>调用Executors类中的静态方法newCachedThreadPool或newFixeThreadPool
</li>
<li>调用submit提交Runnable或Callable对象
</li>
<li>如果想取消任务,或产看任务状态,就要保存好submit返回的Future对象
</li>
<li>当不再提交任务时,调用shutdown
</li>
</ol>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Executors

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#32447;&#31243;&#27744;,&#21442;&#25968;&#25351;&#23450;&#32447;&#31243;&#25968;</span>
<span style="color: #228b22;">ExecutorService</span> <span style="color: #0000ff;">newFixedThreadPool</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">threads</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#24102;&#32531;&#23384;&#30340;&#32447;&#31243;&#27744;,&#35813;&#27744;&#22312;&#24517;&#35201;&#26102;&#21019;&#24314;&#32447;&#31243;,&#32447;&#31243;&#31354;&#38386;60&#31186;&#20043;&#21518;&#32456;&#27490;</span>
ExecutorService newCachedThreadPool()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#25191;&#34892;&#22120;,&#23427;&#22312;&#19968;&#20010;&#21333;&#19968;&#30340;&#32447;&#31243;&#20013;&#20381;&#27425;&#25191;&#34892;&#21508;&#20010;&#20219;&#21153;</span>
ExecutorService newSingleThreadExecutor()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ExecutorService</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25552;&#20132;&#25351;&#23450;&#30340;&#20219;&#21153;&#21462;&#25191;&#34892;</span>
<span style="color: #0000ff;">Future</span>&lt;T&gt; submit(Callable&lt;T&gt; task)
Future&lt;T&gt; submit(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">result</span>)   <span style="color: #b22222;">//</span><span style="color: #b22222;">get&#26041;&#27861;&#22312;&#23436;&#25104;&#26102;&#36820;&#22238;&#25351;&#23450;&#30340;result&#23545;&#35937;</span>
Future&lt;?&gt; submit(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>)             <span style="color: #b22222;">//</span><span style="color: #b22222;">get&#26041;&#27861;&#22312;&#23436;&#25104;&#26102;&#36820;&#22238;null</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#20851;&#38381;&#26381;&#21153;,&#20250;&#20808;&#23436;&#25104;&#24050;&#32463;&#25552;&#20132;&#30340;&#20219;&#21153;&#32780;&#19981;&#20877;&#25509;&#25910;&#26032;&#30340;&#20219;&#21153;</span>
<span style="color: #228b22;">void</span> shutdown()
</pre>

</div>

</div>

<div id="outline-container-8-9-2" class="outline-4">
<h4 id="sec-8-9-2"><span class="section-number-4">8.9.2</span> 预订执行</h4>
<div class="outline-text-4" id="text-8-9-2">




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Executors

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#32447;&#31243;&#27744;,&#21442;&#25968;&#25351;&#23450;&#32447;&#31243;&#25968;</span>
<span style="color: #228b22;">ScheduledExecutorService</span> <span style="color: #0000ff;">newScheduledThreadPool</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">threads</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36820;&#22238;&#19968;&#20010;&#25191;&#34892;&#22120;,&#22312;&#19968;&#20010;&#21333;&#29420;&#32447;&#31243;&#20013;&#35843;&#24230;&#20219;&#21153;</span>
ScheduledExecutorService newSingleThreadScheduledExecutor()
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ScheduledExecutorService</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#39044;&#35746;&#22312;&#25351;&#23450;&#30340;&#26102;&#38388;&#20043;&#21518;&#25191;&#34892;&#20219;&#21153;</span>
<span style="color: #0000ff;">ScheduledFuture</span>&lt;V&gt; schedule(Callable&lt;V&gt; task, 
                            <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>,
                            <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
ScheduledFuture&lt;?&gt; schedule(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, 
                            <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>,
                            <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#39044;&#35746;&#22312;&#21021;&#22987;&#30340;&#24310;&#36831;&#32467;&#26463;&#21518;,&#21608;&#26399;&#24615;&#22320;&#36816;&#34892;&#25351;&#23450;&#20219;&#21153;,&#21608;&#26399;&#20026;period</span>
ScheduledFuture&lt;?&gt; scheduleAtFixedRate(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>,
                                       <span style="color: #228b22;">long</span> <span style="color: #a0522d;">initialDelay</span>, 
                                       <span style="color: #228b22;">long</span> <span style="color: #a0522d;">period</span>,
                                       <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#39044;&#35746;&#22312;&#21021;&#22987;&#30340;&#24310;&#36831;&#32467;&#26463;&#21518;,&#21608;&#26399;&#24615;&#22320;&#36816;&#34892;&#25351;&#23450;&#20219;&#21153;,&#19978;&#19968;&#27425;&#35843;&#29992;&#32467;&#26463;&#21644;&#19979;&#19968;&#27425;&#35843;&#29992;&#24320;&#22987;&#20043;&#38388;&#26377;&#22266;&#23450;&#24310;&#36831;</span>
ScheduledFuture&lt;?&gt; scheduleWithFixedDelay(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>,
                                          <span style="color: #228b22;">long</span> <span style="color: #a0522d;">initialDelay</span>,
                                          <span style="color: #228b22;">long</span> <span style="color: #a0522d;">delay</span>,
                                          <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>

</div>

<div id="outline-container-8-9-3" class="outline-4">
<h4 id="sec-8-9-3"><span class="section-number-4">8.9.3</span> 控制任务组</h4>
<div class="outline-text-4" id="text-8-9-3">

<p>执行器除了可以作为线程池使用,还可以用来控制一组相关任务
</p><ul>
<li>invokeAny同时运行多个任务,而只返回最先完成的任务的结果.
</li>
<li>invokeAll同时运行多个任务,返回一个Future列表
</li>
</ul>




<pre class="src src-java">List&lt;Callable&lt;T&gt;&gt; tasks = ...;
List&lt;Future&lt;T&gt;&gt; results = executor.invokeAll(tasks);
<span style="color: #a020f0;">for</span>(Future&lt;T&gt; result:results)
    ...
</pre>

<ul>
<li>invokeAll的缺陷在于如果第一个任务恰巧花去了很多时间,则可能不得不进行等待
</li>
<li>ExecutorCompletionService解决了这个问题,其take方法将返回一个已完成的结果
</li>
</ul>




<pre class="src src-java"><span style="color: #228b22;">ExecutorCompletionService</span> <span style="color: #a0522d;">service</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ExecutorCompletionService</span>(executor);
<span style="color: #a020f0;">for</span>(Callable&lt;T&gt; task:tasks) service.submit(task);
<span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">i</span>=0;i&lt;tasks.size();i++)
    processFuther(service.take().get());
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.ExecutorService

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25191;&#34892;&#32473;&#23450;&#30340;&#20219;&#21153;,&#36820;&#22238;&#20854;&#20013;&#19968;&#20010;&#20219;&#21153;&#30340;&#32467;&#26524;</span>
<span style="color: #228b22;">T</span> <span style="color: #0000ff;">invokeAny</span>(Collection&lt;Callable&lt;T&gt;&gt; tasks)
T invokeAny(Collection&lt;Callable&lt;T&gt;&gt; tasks, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">timeout</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25191;&#34892;&#32473;&#23450;&#30340;&#20219;&#21153;,&#36820;&#22238;&#25152;&#26377;&#20219;&#21153;&#30340;&#32467;&#26524;</span>
List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;Callable&lt;T&gt;&gt; tasks)
List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;Callable&lt;T&gt;&gt; tasks, 
                          <span style="color: #228b22;">long</span> <span style="color: #a0522d;">timeout</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">ExecutorCompletionService</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#36896;&#19968;&#20010;&#25191;&#34892;&#22120;&#23436;&#25104;&#26381;&#21153;&#26469;&#25910;&#38598;&#32473;&#23450;&#25191;&#34892;&#22120;&#30340;&#32467;&#26524;</span>
<span style="color: #0000ff;">ExecutorCompletionService</span>(<span style="color: #228b22;">Executor</span> <span style="color: #a0522d;">e</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#25552;&#20132;&#19968;&#20010;&#20219;&#21153;&#32473;&#24213;&#23618;&#30340;&#25191;&#34892;&#22120;</span>
Future&lt;T&gt; submit(Callable&lt;T&gt; task)
Future&lt;T&gt; submit(<span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">task</span>, <span style="color: #228b22;">T</span> <span style="color: #a0522d;">result</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31227;&#38500;&#19979;&#19968;&#20010;&#24050;&#23436;&#25104;&#30340;&#32467;&#26524;,&#22914;&#26524;&#27809;&#26377;&#21017;&#38459;&#22622;</span>
Future&lt;T&gt; take()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31227;&#38500;&#19979;&#19968;&#20010;&#24050;&#23436;&#25104;&#30340;&#32467;&#26524;,&#22914;&#26524;&#27809;&#26377;&#21017;&#36820;&#22238;null</span>
Future&lt;T&gt; poll()
Future&lt;T&gt; poll(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>
</div>

</div>

<div id="outline-container-8-10" class="outline-3">
<h3 id="sec-8-10"><span class="section-number-3">8.10</span> 同步器</h3>
<div class="outline-text-3" id="text-8-10">

<p>java预置符合某些行为模式的库类,如果有一个相互合作的线程满足这些行为模式之一,那么应该直接重用合适的库类,而不要试图提供手工的锁与条件的集合
</p>
</div>

<div id="outline-container-8-10-1" class="outline-4">
<h4 id="sec-8-10-1"><span class="section-number-4">8.10.1</span> 信号量</h4>
<div class="outline-text-4" id="text-8-10-1">

<ul>
<li>一个信号量管理固定数目的许可,线程通过acquire请求许可,通过调用release释放许可
</li>
<li>许可数目是固定的,由此限定了通过的线程数量
</li>
<li>许可不是必须由获取它的线程释放
</li>
<li>事实上,任何线程都可以释放任意数目的许可
</li>
<li>如果释放的许可多于可用许可的最大数目,信号量指示被设置为可用许可的最大数目
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">Semaphore</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#32473;&#23450;&#30340;&#35768;&#21487;&#25968;&#30446;&#20026;&#26368;&#22823;&#20540;&#26500;&#24314;&#19968;&#20010;&#20449;&#21495;&#37327;</span>
<span style="color: #0000ff;">Semaphore</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">permits</span>)
Semaphore(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">permits</span>, <span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">fair</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#33719;&#24471;&#19968;&#20010;&#35768;&#21487;</span>
<span style="color: #228b22;">void</span> acquire()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23581;&#35797;&#33719;&#24471;&#19968;&#20010;&#35768;&#21487;,&#22914;&#26524;&#27809;&#26377;&#21487;&#29992;&#30340;&#35768;&#21487;,&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> tryAcquire()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#23581;&#35797;&#22312;&#32473;&#23450;&#26102;&#38388;&#20869;&#33719;&#24471;&#19968;&#20010;&#35768;&#21487;,&#22914;&#26524;&#27809;&#26377;&#21487;&#29992;&#30340;&#35768;&#21487;,&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> tryAcquire(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#37322;&#25918;&#19968;&#20010;&#35768;&#21487;</span>
<span style="color: #228b22;">void</span> release()
</pre>

</div>

</div>

<div id="outline-container-8-10-2" class="outline-4">
<h4 id="sec-8-10-2"><span class="section-number-4">8.10.2</span> 倒计时门栓</h4>
<div class="outline-text-4" id="text-8-10-2">

<ul>
<li>倒计时门栓让一个线程集等待直到计数变为0
</li>
<li>倒计时门栓是一次性的,一旦计数为0,就不能再重用了
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">CountDownLatch</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#29992;&#32473;&#23450;&#35745;&#25968;&#26500;&#24314;&#19968;&#20010;&#20498;&#35745;&#26102;&#38376;&#26643;</span>
<span style="color: #0000ff;">CountdownLatch</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">count</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#38376;&#26643;&#30340;&#35745;&#25968;&#38477;&#20026;&#38646;</span>
<span style="color: #228b22;">void</span> await()

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#38376;&#26643;&#30340;&#35745;&#25968;&#38477;&#20026;&#38646;&#25110;&#32773;&#36229;&#26102;,&#22914;&#26524;&#35745;&#25968;&#20026;0&#36820;&#22238;true,&#22914;&#26524;&#36229;&#26102;&#36820;&#22238;false</span>
<span style="color: #228b22;">boolean</span> await(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#36882;&#20943;&#38376;&#26643;&#30340;&#35745;&#25968;&#20540;</span>
<span style="color: #a020f0;">public</span> <span style="color: #228b22;">void</span> countDown()
</pre>

</div>

</div>

<div id="outline-container-8-10-3" class="outline-4">
<h4 id="sec-8-10-3"><span class="section-number-4">8.10.3</span> 障栅</h4>
<div class="outline-text-4" id="text-8-10-3">

<ul>
<li>适用于大量线程运行在一次计算的不同部分,当所有部分都准备好时,再把结果组合在一起
</li>
<li>当一个线程完成了它的那部分任务后,让它运行到障栅处,一旦所有线程都达到了这个障栅,障栅就撤销,线程就可以继续运行
</li>
<li>障栅在所有等待线程被释放后可被重用
</li>
</ul>




<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.<span style="color: #228b22;">CyclicBarrier</span>

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#24314;&#19968;&#20010;&#32447;&#31243;&#25968;&#30446;&#26159;parties&#30340;&#24490;&#29615;&#38556;&#26629;,&#24403;&#25152;&#26377;&#32447;&#31243;&#37117;&#22312;&#38556;&#26629;&#19978;&#35843;&#29992;await&#21518;,&#25191;&#34892;barierAction</span>
<span style="color: #0000ff;">CyclicBarrier</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">parties</span>)
CyclicBarrier(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">parties</span>, <span style="color: #228b22;">Runnable</span> <span style="color: #a0522d;">barrierAction</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#31561;&#24453;&#30452;&#21040;&#25152;&#26377;&#32447;&#31243;&#22312;&#38556;&#26629;&#19978;&#35843;&#29992;await&#25110;&#32773;&#26102;&#38388;&#36229;&#26102;,&#25104;&#21151;&#26102;&#36820;&#22238;&#36825;&#20010;&#32447;&#31243;&#30340;&#24207;&#21495;</span>
<span style="color: #228b22;">int</span> await()
<span style="color: #228b22;">int</span> await(<span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>

</div>

<div id="outline-container-8-10-4" class="outline-4">
<h4 id="sec-8-10-4"><span class="section-number-4">8.10.4</span> 交换器</h4>
<div class="outline-text-4" id="text-8-10-4">

<p>当两个线程在同一个数据缓冲区的两个实例上工作时,可以使用交换器,
典型的情况是一个线程向缓冲区填入数据,另一个线程消耗这些数据,当他们都完成以后,相互交换缓冲区
</p>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.Exchanger&lt;V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#38459;&#22622;&#30452;&#21040;&#21478;&#19968;&#20010;&#32447;&#31243;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;,&#28982;&#21518;,&#20854;&#20182;&#32447;&#31243;&#20132;&#25442;item,&#24182;&#36820;&#22238;&#20854;&#20182;&#32447;&#31243;&#30340;item</span>
V exchange(<span style="color: #228b22;">V</span> <span style="color: #a0522d;">item</span>)
V exchange(<span style="color: #228b22;">V</span> <span style="color: #a0522d;">item</span>, <span style="color: #228b22;">long</span> <span style="color: #a0522d;">time</span>, <span style="color: #228b22;">TimeUnit</span> <span style="color: #a0522d;">unit</span>)
</pre>

</div>

</div>

<div id="outline-container-8-10-5" class="outline-4">
<h4 id="sec-8-10-5"><span class="section-number-4">8.10.5</span> 同步队列</h4>
<div class="outline-text-4" id="text-8-10-5">

<p>同步队列是一种将生产者与消费者线程配对的机制.
当一个线程调用put方法时,将会阻塞直到另一个线程调用take方法为止.
当一个线程调用take方法时,将会阻塞直到另一个线程调用put方法为止.
与Exchanger的情况不同,数据传递是单向的,从生产者到消费者.
</p>


<pre class="src src-java"><span style="color: #008b8b;">java</span>.<span style="color: #008b8b;">util</span>.<span style="color: #008b8b;">concurrent</span>.SynchronousQueue&lt;V&gt;

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#26500;&#24314;&#19968;&#20010;&#20801;&#35768;&#32447;&#31243;&#25552;&#20132;item&#30340;&#21516;&#27493;&#38431;&#21015;.&#22914;&#26524;fair&#26159;true,&#38431;&#21015;&#20248;&#20808;&#29031;&#39038;&#31561;&#24453;&#20102;&#26368;&#38271;&#26102;&#38388;&#30340;&#32447;&#31243;</span>
SynchronousQueue()
SynchronousQueue(<span style="color: #228b22;">boolean</span> <span style="color: #a0522d;">fair</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#38459;&#22622;&#30452;&#21040;&#21478;&#19968;&#20010;&#32447;&#31243;&#35843;&#29992;take&#26469;&#33719;&#21462;item</span>
<span style="color: #228b22;">void</span> put(<span style="color: #228b22;">V</span> <span style="color: #a0522d;">item</span>)

<span style="color: #b22222;">//</span><span style="color: #b22222;">&#38459;&#22622;&#30452;&#21040;&#21478;&#19968;&#20010;&#32447;&#31243;&#35843;&#29992;put,&#36820;&#22238;&#21478;&#19968;&#20010;&#32447;&#31243;&#25552;&#20379;&#30340;item</span>
V take()
</pre>

</div>
</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2014-09-07T20:28+0800</p>
<p class="author">Author: 王超</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.3f with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
